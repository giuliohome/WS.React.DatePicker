function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
/* https://github.com/jonathantneal/closest */
(function(w,p){p=w.Element.prototype
if(!p.matches){p.matches=p.msMatchesSelector||function(s){var m=(this.document||this.ownerDocument).querySelectorAll(s);for(var i=0;m[i]&&m[i]!==e;++i);return!!m[i]}}
if(!p.closest){p.closest=function(s){var e=this;while(e&&e.nodeType==1){if(e.matches(s))return e;e=e.parentNode}return null}}})(this);
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM;a=self;b=a.SPA=a.SPA||{};c=b.Client=b.Client||{};d=a.WebSharper=a.WebSharper||{};e=d.Operators=d.Operators||{};f=d.Obj=d.Obj||{};g=d.UI=d.UI||{};h=g.Var=g.Var||{};i=a.ReactHook=a.ReactHook||{};j=i.WrapReact=i.WrapReact||{};k=i.HelloWorld=i.HelloWorld||{};l=d.React=d.React||{};m=l.ReactModule=l.ReactModule||{};n=g.View=g.View||{};o=g.AttrProxy=g.AttrProxy||{};p=a.StartupCode$SPA$Client=a.StartupCode$SPA$Client||{};q=g.Doc=g.Doc||{};r=d.JavaScript=d.JavaScript||{};s=r.Pervasives=r.Pervasives||{};t=l.Html=l.Html||{};u=d.Utils=d.Utils||{};v=a.UIBase=a.UIBase||{};w=v.MyVars=v.MyVars||{};x=d.Arrays=d.Arrays||{};y=r.JS=r.JS||{};z=g.Client=g.Client||{};A=z.Templates=z.Templates||{};B=g.Snap=g.Snap||{};C=g.Attrs=g.Attrs||{};D=g.Var$1=g.Var$1||{};E=g.DomUtility=g.DomUtility||{};F=d.Unchecked=d.Unchecked||{};G=a.EventTarget;H=a.WindowOrWorkerGlobalScope;I=a.Node;J=d.Collections=d.Collections||{};K=J.Dictionary=J.Dictionary||{};L=g.ConcreteVar=g.ConcreteVar||{};M=d.DateUtil=d.DateUtil||{};N=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};O=J.HashSet=J.HashSet||{};P=d.Seq=d.Seq||{};Q=g.Docs=g.Docs||{};R=g.Elt=g.Elt||{};S=g.Array=g.Array||{};T=g.Abbrev=g.Abbrev||{};U=T.Fresh=T.Fresh||{};V=g.DocElemNode=g.DocElemNode||{};W=a.CharacterData;X=d.Enumerator=d.Enumerator||{};Y=J.DictionaryUtil=J.DictionaryUtil||{};Z=a.Object;_0=A.Prepare=A.Prepare||{};_1=d.Slice=d.Slice||{};_2=J.KeyCollection=J.KeyCollection||{};_3=d.Numeric=d.Numeric||{};_4=g.An=g.An||{};_5=z.Settings=z.Settings||{};_6=T.Mailbox=T.Mailbox||{};_7=g.Updates=g.Updates||{};_8=d.List=d.List||{};_9=_8.T=_8.T||{};_=z.Attrs=z.Attrs||{};$=_.Dyn=_.Dyn||{};ba=d.Strings=d.Strings||{};bb=z.Docs=z.Docs||{};bc=bb.RunState=bb.RunState||{};bd=bb.NodeSet=bb.NodeSet||{};be=d.Concurrency=d.Concurrency||{};bf=g.Anims=g.Anims||{};bg=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bh=d.Queue=d.Queue||{};bi=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bj=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};bk=X.T=X.T||{};bl=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};bm=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bn=g.AppendList=g.AppendList||{};bo=J.HashSetUtil=J.HashSetUtil||{};bp=g.BindVar=g.BindVar||{};bq=g.String=g.String||{};br=g.CheckedInput=g.CheckedInput||{};bs=be.Scheduler=be.Scheduler||{};bt=g.Easing=g.Easing||{};bu=be.AsyncBody=be.AsyncBody||{};bv=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bw=be.CT=be.CT||{};bx=T.HashSet=T.HashSet||{};by=d.Char=d.Char||{};bz=d.CancellationTokenSource=d.CancellationTokenSource||{};bA=bb.DomNodes=bb.DomNodes||{};bB=a.Error;bC=d.OperationCanceledException=d.OperationCanceledException||{};bD=d.Lazy=d.Lazy||{};bE=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bF=d.LazyExtensionsProxy=d.LazyExtensionsProxy||{};bG=bF.LazyRecord=bF.LazyRecord||{};bH=a.ReactDOM;bI=a.IntelliFactory;bJ=bI&&bI.Runtime;bK=a.React;bL=a.Date;bM=a.console;c.Main=function(){var bN,bO;bN=q.Element("div",[],[q.Element("p",[],[q.TextView((bO=c.count().get_View(),n.Map(function(bP){return function(bQ){return bP("You clicked "+a.String(bQ)+" times");};}(a.id),bO)))]),q.Element("button",[o.HandlerImpl("click",function(){return function(){var bP;bP=c.count().Get()+1;c.count().Set(bP);return(j.setCount())(bP);};})],[q.TextNode("W# UI Click Me!")]),q.Element("div",[o.OnAfterRenderImpl(function(bP){bH.render(j.FunctionComponent(k.Example,null),bP);})],[])]);A.LoadLocalTemplates("");q.RunById("mainUI",bN);};c.count=function(){p.$cctor();return p.count$1;};e.FailWith=function(bN){throw new bB(bN);};e.KeyValue=function(bN){return[bN.K,bN.V];};f=d.Obj=bJ.Class({Equals:function(bN){return this===bN;},GetHashCode:function(){return -1;}},null,f);f.New=bJ.Ctor(function(){},f);h=g.Var=bJ.Class({},f,h);h.New=bJ.Ctor(function(){f.New.call(this);},h);j.setCount=function(){p.$cctor();return p.setCount;};j.FunctionComponent=function(bN,bO){return bK.createElement(bN,bO);};j.set_setCount=function(bN){p.$cctor();p.setCount=bN;};k.Example=function(){var bN,bO,bP,bQ,bR,bS,bT;bN=bK.useState(0);bO=bN[1];bP=bN[0];bQ=bK.useState(new a.Date((bR=bL.now(),M.DatePortion(bR))));bS=bQ[0];bT=bK.createElement(a["eval"]("window.MyDatePicker"),{selected:bS,onChange:bQ[1],showTimeSelect:true});j.set_setCount(bO);return bK.createElement("div",null,bT,bK.createElement("p",null,((t.textf(bJ.Curried3(function(bU,bV,bW){return bU("You selected "+u.toSafe(bV)+" date "+u.toSafe(bW)+" time");})))(bS.toDateString()))(bS.toTimeString())),bK.createElement("p",null,(t.textf(function(bU){return function(bV){return bU("You clicked "+a.String(bV)+" times");};}))(bP)),bK.createElement("button",{onClick:function(){bO(bP+1);w.count().Set(bP+1);}},"W# React Click me"));};m.elt=function(bN,bO,bP){return bK.createElement(bN,bO,m.inlineArrayOfSeq(bP));};m.inlineArrayOfSeq=function(bN){return bN instanceof a.Array?bN:x.ofSeq(bN);};n.Map=function(bN,bO){return n.CreateLazy(function(){return B.Map(bN,bO());});};n.CreateLazy=function(bN){var bO;bO={c:null,o:bN};return function(){var bP,bQ;bP=bO.c;return bP===null?(bP=bO.o(),bO.c=bP,(bQ=bP.s,bQ!=null&&bQ.$==0)?bO.o=null:B.WhenObsoleteRun(bP,function(){bO.c=null;}),bP):bP;};};n.Const=function(bN){var bO;bO=B.New({$:0,$0:bN});return function(){return bO;};};n.Sink=function(bN,bO){function bP(){B.WhenRun(bO(),bN,function(){be.scheduler().Fork(bP);});}be.scheduler().Fork(bP);};n.Map2Unit=function(bN,bO){return n.CreateLazy(function(){return B.Map2Unit(bN(),bO());});};o=g.AttrProxy=bJ.Class({},null,o);o.HandlerImpl=function(bN,bO){return C.Static(function(bP){bP.addEventListener(bN,function(bQ){return(bO(bP))(bQ);},false);});};o.OnAfterRenderImpl=function(bN){return new o({$:4,$0:bN});};o.Concat=function(bN){var bO;bO=S.ofSeqNonCopying(bN);return S.TreeReduce(C.EmptyAttr(),o.Append,bO);};o.Append=function(bN,bO){return C.AppendTree(bN,bO);};p.$cctor=function(){p.$cctor=a.ignore;p.count=D.Create$1(0);p.setCount=a.ignore;p.count$1=w.count();};q=g.Doc=bJ.Class({},f,q);q.TextNode=function(bN){return q.Mk({$:5,$0:self.document.createTextNode(bN)},n.Const());};q.RunById=function(bN,bO){var bP;bP=self.document.getElementById(bN);F.Equals(bP,null)?e.FailWith("invalid id: "+bN):q.Run(bP,bO);};q.Element=function(bN,bO,bP){var bQ,bR;bQ=o.Concat(bO);bR=q.Concat(bP);return R.New(self.document.createElement(bN),bQ,bR);};q.Mk=function(bN,bO){return new q.New(bN,bO);};q.Run=function(bN,bO){Q.LinkElement(bN,bO.docNode);q.RunInPlace(false,bN,bO);};q.TextView=function(bN){var bO;bO=Q.CreateTextNode();return q.Mk({$:4,$0:bO},n.Map(function(bP){Q.UpdateTextNode(bO,bP);},bN));};q.Concat=function(bN){var bO;bO=S.ofSeqNonCopying(bN);return S.TreeReduce(q.get_Empty(),q.Append,bO);};q.RunInPlace=function(bN,bO,bP){var bQ;bQ=Q.CreateRunState(bO,bP.docNode);n.Sink(_4.get_UseAnimations()||_5.BatchUpdatesEnabled()?_6.StartProcessor(Q.PerformAnimatedUpdate(bN,bQ,bP.docNode)):function(){Q.PerformSyncUpdate(bN,bQ,bP.docNode);},bP.updates);};q.Append=function(bN,bO){return q.Mk({$:0,$0:bN.docNode,$1:bO.docNode},n.Map2Unit(bN.updates,bO.updates));};q.get_Empty=function(){return q.Mk(null,n.Const());};q.New=bJ.Ctor(function(bN,bO){f.New.call(this);this.docNode=bN;this.updates=bO;},q);s.NewFromSeq=function(bN){var bO,bP,bQ;bO={};bP=X.Get(bN);try{while(bP.MoveNext()){bQ=bP.Current();bO[bQ[0]]=bQ[1];}}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}return bO;};t.textf=function(bN){return bN(a.id);};u.toSafe=function(bN){return bN==null?"":bN;};w.count=function(){p.$cctor();return p.count;};x.get=function(bN,bO){x.checkBounds(bN,bO);return bN[bO];};x.checkBounds=function(bN,bO){if(bO<0||bO>=bN.length)e.FailWith("Index was outside the bounds of the array.");};x.length=function(bN){return bN.dims===2?bN.length*bN.length:bN.length;};x.set=function(bN,bO,bP){x.checkBounds(bN,bO);bN[bO]=bP;};y.GetFieldValues=function(bN){var bO,bP;bO=[];for(var bQ in bN)bO.push(bN[bQ]);return bO;};A.LoadLocalTemplates=function(bN){!A.LocalTemplatesLoaded()?(A.set_LocalTemplatesLoaded(true),A.LoadNestedTemplates(self.document.body,"")):void 0;A.LoadedTemplates().set_Item(bN,A.LoadedTemplateFile(""));};A.LocalTemplatesLoaded=function(){N.$cctor();return N.LocalTemplatesLoaded;};A.set_LocalTemplatesLoaded=function(bN){N.$cctor();N.LocalTemplatesLoaded=bN;};A.LoadNestedTemplates=function(bN,bO){var bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2;function bP(b3){var b4,b5;if(!bQ.ContainsKey(b3)){b4=(b5=null,[bR.TryGetValue(b3,{get:function(){return b5;},set:function(b6){b5=b6;}}),b5]);b4[0]?(b2.Add(b3),bR.Remove(b3),A.PrepareTemplateStrict(bO,{$:1,$0:b3},b4[1],{$:1,$0:bP})):bM.warn(b2.Contains(b3)?"Encountered loop when instantiating "+b3:"Local template does not exist: "+b3);}}bQ=A.LoadedTemplateFile(bO);bR=new K.New$5();bS=bN.querySelectorAll("[ws-template]");for(bT=0,bU=bS.length-1;bT<=bU;bT++){bV=bS[bT];bW=bV.getAttribute("ws-template").toLowerCase();bV.removeAttribute("ws-template");bR.set_Item(bW,A.FakeRootSingle(bV));}bX=bN.querySelectorAll("[ws-children-template]");for(bY=0,bZ=bX.length-1;bY<=bZ;bY++){b0=bX[bY];b1=b0.getAttribute("ws-children-template").toLowerCase();b0.removeAttribute("ws-children-template");bR.set_Item(b1,A.FakeRoot(b0));}b2=new O.New$3();while(bR.count>0)bP(P.head(bR.get_Keys()));};A.LoadedTemplates=function(){N.$cctor();return N.LoadedTemplates;};A.LoadedTemplateFile=function(bN){var bO,bP,bQ;bO=(bP=null,[A.LoadedTemplates().TryGetValue(bN,{get:function(){return bP;},set:function(bR){bP=bR;}}),bP]);return bO[0]?bO[1]:(bQ=new K.New$5(),(A.LoadedTemplates().set_Item(bN,bQ),bQ));};A.FakeRootSingle=function(bN){var bO,bP,bQ,bR;bN.removeAttribute("ws-template");bO=bN.getAttribute("ws-replace");bO===null?void 0:(bN.removeAttribute("ws-replace"),bP=bN.parentNode,F.Equals(bP,null)?void 0:(bQ=self.document.createElement(bN.tagName),bQ.setAttribute("ws-replace",bO),bP.replaceChild(bQ,bN)));bR=self.document.createElement("div");bR.appendChild(bN);return bR;};A.FakeRoot=function(bN){var bO;bO=self.document.createElement("div");while(bN.hasChildNodes())bO.appendChild(bN.firstChild);return bO;};A.PrepareTemplateStrict=function(bN,bO,bP,bQ){var bR;function bS(bX,bY){var bZ,b0,b1,b2,b3,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn;function b4(co){}while(true)switch(bX){case 0:if(bY!==null){bZ=bY.nextSibling;if(F.Equals(bY.nodeType,I.TEXT_NODE))_0.convertTextNode(bY);else if(F.Equals(bY.nodeType,I.ELEMENT_NODE))bU(bY);bY=bZ;}else return null;break;case 1:b5=_1.string(bY.nodeName,{$:1,$0:3},null).toLowerCase();b6=(b0=b5.indexOf("."),b0===-1?[bN,b5]:[_1.string(b5,null,{$:1,$0:b0-1}),_1.string(b5,{$:1,$0:b0+1},null)]);b7=b6[1];b8=b6[0];if(b8!==""&&!A.LoadedTemplates().ContainsKey(b8))return _0.failNotLoaded(b7);else{if(b8===""&&bQ!=null)bQ.$0(b7);b9=A.LoadedTemplates().get_Item(b8);if(!b9.ContainsKey(b7))return _0.failNotLoaded(b7);else{b_=b9.get_Item(b7);b$=b_.cloneNode(true);ca=new O.New$3();cb=new K.New$5();cc=bY.attributes;for(cd=0,ce=cc.length-1;cd<=ce;cd++){cf=cc.item(cd).name.toLowerCase();cb.set_Item(cf,(cg=cc.item(cd).nodeValue,cg===""?cf:cg.toLowerCase()));!ca.Add(cf)?bM.warn("Hole mapped twice",cf):void 0;}for(ch=0,ci=bY.childNodes.length-1;ch<=ci;ch++){cj=bY.childNodes[ch];F.Equals(cj.nodeType,I.ELEMENT_NODE)?!ca.Add(cj.nodeName.toLowerCase())?bM.warn("Hole filled twice",b7):void 0:void 0;}ck=bY.childNodes.length===1&&F.Equals(bY.firstChild.nodeType,I.TEXT_NODE);if(ck){b2=_0.fillTextHole(b$,bY.firstChild.textContent,b7);((function(co){return function(cp){if(cp!=null)co(cp.$0);};}((b3=function(co){return function(cp){return co.Add(cp);};}(ca),function(co){return b4(b3(co));})))(b2));}_0.removeHolesExcept(b$,ca);if(!ck){for(cl=0,cm=bY.childNodes.length-1;cl<=cm;cl++){cn=bY.childNodes[cl];F.Equals(cn.nodeType,I.ELEMENT_NODE)?cn.hasAttributes()?_0.fillInstanceAttrs(b$,cn):bT(b$,cn):void 0;}}_0.mapHoles(b$,cb);_0.fill(b$,bY.parentNode,bY);bY.parentNode.removeChild(bY);return;}}break;}}function bT(bX,bY){var bZ,b1,b2;function b0(b3,b4){var b5;if(b1==="title"&&bY.hasChildNodes()){b5=E.ParseHTMLIntoFakeRoot(bY.textContent);bY.removeChild(bY.firstChild);while(b5.hasChildNodes())bY.appendChild(b5.firstChild);}else null;bU(bY);return _0.fill(bY,b3,b4);}b1=bY.nodeName.toLowerCase();A.foreachNotPreserved(bX,"[ws-attr-holes]",function(b3){var b4,b5,b6,b7,b8;b4=ba.SplitChars(b3.getAttribute("ws-attr-holes"),[" "],1);for(b5=0,b6=b4.length-1;b5<=b6;b5++){b7=x.get(b4,b5);b3.setAttribute(b7,(b8=new a.RegExp("\\${"+b1+"}","ig"),b3.getAttribute(b7).replace(b8,bY.textContent)));}});b2=bX.querySelector("[ws-hole="+b1+"]");if(F.Equals(b2,null)){bZ=bX.querySelector("[ws-replace="+b1+"]");return F.Equals(bZ,null)?null:(b0(bZ.parentNode,bZ),void bZ.parentNode.removeChild(bZ));}else{while(b2.hasChildNodes())b2.removeChild(b2.lastChild);b2.removeAttribute("ws-hole");return b0(b2,null);}}function bU(bX){if(!bX.hasAttribute("ws-preserve"))if(ba.StartsWith(bX.nodeName.toLowerCase(),"ws-"))bW(bX);else{_0.convertAttrs(bX);bV(bX.firstChild);}}function bV(bX){return bS(0,bX);}function bW(bX){return bS(1,bX);}bR=(bO==null?"":bO.$0).toLowerCase();A.LoadedTemplateFile(bN).set_Item(bR,bP);bP.hasChildNodes()?(function(bX){var bY,bZ,b0,b1;while(true){bY=bX.querySelector("[ws-template]");if(F.Equals(bY,null)){bZ=bX.querySelector("[ws-children-template]");if(F.Equals(bZ,null))return null;else{b0=bZ.getAttribute("ws-children-template");bZ.removeAttribute("ws-children-template");A.PrepareTemplateStrict(bN,{$:1,$0:b0},bZ,null);bX=bX;}}else{b1=bY.getAttribute("ws-template");(A.PrepareSingleTemplate(bN,{$:1,$0:b1},bY))(null);bX=bX;}}}(bP),bV(bP.firstChild)):void 0;};A.foreachNotPreserved=function(bN,bO,bP){E.IterSelector(bN,bO,function(bQ){if(bQ.closest("[ws-preserve]")==null)bP(bQ);});};A.PrepareSingleTemplate=function(bN,bO,bP){var bQ;bQ=A.FakeRootSingle(bP);return function(bR){A.PrepareTemplateStrict(bN,bO,bQ,bR);};};A.TextHoleRE=function(){N.$cctor();return N.TextHoleRE;};B.Map=function(bN,bO){var bP,bQ;bP=bO.s;return bP!=null&&bP.$==0?B.New({$:0,$0:bN(bP.$0)}):(bQ=B.New({$:3,$0:[],$1:[]}),(B.When(bO,function(bR){B.MarkDone(bQ,bO,bN(bR));},bQ),bQ));};B.WhenObsoleteRun=function(bN,bO){var bP;bP=bN.s;bP==null?bO():bP!=null&&bP.$==2?bP.$1.push(bO):bP!=null&&bP.$==3?bP.$1.push(bO):void 0;};B.When=function(bN,bO,bP){var bQ;bQ=bN.s;bQ==null?B.Obsolete(bP):bQ!=null&&bQ.$==2?(B.EnqueueSafe(bQ.$1,bP),bO(bQ.$0)):bQ!=null&&bQ.$==3?(bQ.$0.push(bO),B.EnqueueSafe(bQ.$1,bP)):bO(bQ.$0);};B.MarkDone=function(bN,bO,bP){var bQ;if(bQ=bO.s,bQ!=null&&bQ.$==0)B.MarkForever(bN,bP);else B.MarkReady(bN,bP);};B.EnqueueSafe=function(bN,bO){var bP,bQ,bR,bS;bN.push(bO);if(bN.length%20===0){bP=bN.slice(0);bh.Clear(bN);for(bQ=0,bR=x.length(bP)-1;bQ<=bR;bQ++){bS=x.get(bP,bQ);typeof bS=="object"?function(bT){if(bT.s)bN.push(bT);}(bS):function(bT){bN.push(bT);}(bS);}}else void 0;};B.MarkForever=function(bN,bO){var bP,bQ,bR,bS;bP=bN.s;if(bP!=null&&bP.$==3){bN.s={$:0,$0:bO};bQ=bP.$0;for(bR=0,bS=x.length(bQ)-1;bR<=bS;bR++)(x.get(bQ,bR))(bO);}else void 0;};B.MarkReady=function(bN,bO){var bP,bQ,bR,bS;bP=bN.s;if(bP!=null&&bP.$==3){bN.s={$:2,$0:bO,$1:bP.$1};bQ=bP.$0;for(bR=0,bS=x.length(bQ)-1;bR<=bS;bR++)(x.get(bQ,bR))(bO);}else void 0;};B.WhenRun=function(bN,bO,bP){var bQ;bQ=bN.s;bQ==null?bP():bQ!=null&&bQ.$==2?(bQ.$1.push(bP),bO(bQ.$0)):bQ!=null&&bQ.$==3?(bQ.$0.push(bO),bQ.$1.push(bP)):bO(bQ.$0);};B.Copy=function(bN){var bO,bP,bQ;bO=bN.s;return bO==null?bN:bO!=null&&bO.$==2?(bP=B.New({$:2,$0:bO.$0,$1:[]}),(B.WhenObsolete(bN,bP),bP)):bO!=null&&bO.$==3?(bQ=B.New({$:3,$0:[],$1:[]}),(B.When(bN,function(bR){B.MarkDone(bQ,bN,bR);},bQ),bQ)):bN;};B.Map2Unit=function(bN,bO){var bP,bQ,bR;function bS(){var bT,bU,bV;if(!(bT=bR.s,bT!=null&&bT.$==0||bT!=null&&bT.$==2)){bU=B.ValueAndForever(bN);bV=B.ValueAndForever(bO);bU!=null&&bU.$==1?bV!=null&&bV.$==1?bU.$0[1]&&bV.$0[1]?B.MarkForever(bR,null):B.MarkReady(bR,null):void 0:void 0;}}bP=bN.s;bQ=bO.s;return bP!=null&&bP.$==0?bQ!=null&&bQ.$==0?B.New({$:0,$0:null}):bO:bQ!=null&&bQ.$==0?bN:(bR=B.New({$:3,$0:[],$1:[]}),(B.When(bN,bS,bR),B.When(bO,bS,bR),bR));};B.WhenObsolete=function(bN,bO){var bP;bP=bN.s;bP==null?B.Obsolete(bO):bP!=null&&bP.$==2?B.EnqueueSafe(bP.$1,bO):bP!=null&&bP.$==3?B.EnqueueSafe(bP.$1,bO):void 0;};B.ValueAndForever=function(bN){var bO;bO=bN.s;return bO!=null&&bO.$==0?{$:1,$0:[bO.$0,true]}:bO!=null&&bO.$==2?{$:1,$0:[bO.$0,false]}:null;};C.Static=function(bN){return new o({$:3,$0:bN});};C.Updates=function(bN){return S.MapTreeReduce(function(bO){return bO.NChanged();},n.Const(),n.Map2Unit,bN.DynNodes);};C.AppendTree=function(bN,bO){var bP;return bN===null?bO:bO===null?bN:(bP=new o({$:2,$0:bN,$1:bO}),(C.SetFlags(bP,C.Flags(bN)|C.Flags(bO)),bP));};C.EmptyAttr=function(){bi.$cctor();return bi.EmptyAttr;};C.Insert=function(bN,bO){var bP,bQ,bR;function bS(bT){if(!(bT===null))if(bT!=null&&bT.$==1)bP.push(bT.$0);else if(bT!=null&&bT.$==2){bS(bT.$0);bS(bT.$1);}else if(bT!=null&&bT.$==3)bT.$0(bN);else if(bT!=null&&bT.$==4)bQ.push(bT.$0);}bP=[];bQ=[];bS(bO);bR=bP.slice(0);return $.New(bN,C.Flags(bO),bR,bQ.length===0?null:{$:1,$0:function(bT){P.iter(function(bU){bU(bT);},bQ);}});};C.SetFlags=function(bN,bO){bN.flags=bO;};C.Flags=function(bN){return bN!==null&&bN.hasOwnProperty("flags")?bN.flags:0;};C.HasExitAnim=function(bN){var bO;bO=2;return(bN.DynFlags&bO)===bO;};C.GetExitAnim=function(bN){return C.GetAnim(bN,function(bO,bP){return bO.NGetExitAnim(bP);});};C.HasEnterAnim=function(bN){var bO;bO=1;return(bN.DynFlags&bO)===bO;};C.GetEnterAnim=function(bN){return C.GetAnim(bN,function(bO,bP){return bO.NGetEnterAnim(bP);});};C.HasChangeAnim=function(bN){var bO;bO=4;return(bN.DynFlags&bO)===bO;};C.GetChangeAnim=function(bN){return C.GetAnim(bN,function(bO,bP){return bO.NGetChangeAnim(bP);});};C.GetAnim=function(bN,bO){return _4.Concat(x.map(function(bP){return bO(bP,bN.DynElem);},bN.DynNodes));};C.Sync=function(bN,bO){x.iter(function(bP){bP.NSync(bN);},bO.DynNodes);};D=g.Var$1=bJ.Class({},f,D);D.Create$1=function(bN){return new L.New(false,B.New({$:2,$0:bN,$1:[]}),bN);};E.ParseHTMLIntoFakeRoot=function(bN){var bO,bP,bQ,bR,bS;bO=self.document.createElement("div");return!E.rhtml().test(bN)?(bO.appendChild(self.document.createTextNode(bN)),bO):(bP=(bQ=E.rtagName().exec(bN),F.Equals(bQ,null)?"":x.get(bQ,1).toLowerCase()),(bR=(bS=(E.wrapMap())[bP],bS?bS:E.defaultWrap()),(bO.innerHTML=bR[1]+bN.replace(E.rxhtmlTag(),"<$1></$2>")+bR[2],function(bT,bU){var bV;while(true)if(bU===0)return bT;else{bV=bU;bT=bT.lastChild;bU=bV-1;}}(bO,bR[0]))));};E.rhtml=function(){bl.$cctor();return bl.rhtml;};E.wrapMap=function(){bl.$cctor();return bl.wrapMap;};E.defaultWrap=function(){bl.$cctor();return bl.defaultWrap;};E.rxhtmlTag=function(){bl.$cctor();return bl.rxhtmlTag;};E.rtagName=function(){bl.$cctor();return bl.rtagName;};E.IterSelector=function(bN,bO,bP){var bQ,bR,bS;bQ=bN.querySelectorAll(bO);for(bR=0,bS=bQ.length-1;bR<=bS;bR++)bP(bQ[bR]);};E.InsertAt=function(bN,bO,bP){var bQ;if(!(bP.parentNode===bN&&bO===(bQ=bP.nextSibling,F.Equals(bQ,null)?null:bQ)))bN.insertBefore(bP,bO);};E.RemoveNode=function(bN,bO){if(bO.parentNode===bN)bN.removeChild(bO);};F.Equals=function(bN,bO){var bP,bQ,bR,bS;if(bN===bO)return true;else{bP=typeof bN;if(bP=="object"){if(bN===null||bN===void 0||bO===null||bO===void 0)return false;else if("Equals"in bN)return bN.Equals(bO);else if(bN instanceof a.Array&&bO instanceof a.Array)return F.arrayEquals(bN,bO);else if(bN instanceof bL&&bO instanceof bL)return F.dateEquals(bN,bO);else{bQ=[true];for(var bT in bN)if(function(bU){bQ[0]=!bN.hasOwnProperty(bU)||bO.hasOwnProperty(bU)&&F.Equals(bN[bU],bO[bU]);return!bQ[0];}(bT))break;if(bQ[0]){for(var bU in bO)if(function(bV){bQ[0]=!bO.hasOwnProperty(bV)||bN.hasOwnProperty(bV);return!bQ[0];}(bU))break;}return bQ[0];}}else return bP=="function"&&("$Func"in bN?bN.$Func===bO.$Func&&bN.$Target===bO.$Target:"$Invokes"in bN&&"$Invokes"in bO&&F.arrayEquals(bN.$Invokes,bO.$Invokes));}};F.arrayEquals=function(bN,bO){var bP,bQ;if(x.length(bN)===x.length(bO)){bP=true;bQ=0;while(bP&&bQ<x.length(bN)){!F.Equals(x.get(bN,bQ),x.get(bO,bQ))?bP=false:void 0;bQ=bQ+1;}return bP;}else return false;};F.dateEquals=function(bN,bO){return bN.getTime()===bO.getTime();};F.Hash=function(bN){var bO;bO=typeof bN;return bO=="function"?0:bO=="boolean"?bN?1:0:bO=="number"?bN:bO=="string"?F.hashString(bN):bO=="object"?bN==null?0:bN instanceof a.Array?F.hashArray(bN):F.hashObject(bN):0;};F.hashString=function(bN){var bO,bP,bQ;if(bN===null)return 0;else{bO=5381;for(bP=0,bQ=bN.length-1;bP<=bQ;bP++)bO=F.hashMix(bO,bN[bP].charCodeAt());return bO;}};F.hashArray=function(bN){var bO,bP,bQ;bO=-34948909;for(bP=0,bQ=x.length(bN)-1;bP<=bQ;bP++)bO=F.hashMix(bO,F.Hash(x.get(bN,bP)));return bO;};F.hashObject=function(bN){var bO,bP;if("GetHashCode"in bN)return bN.GetHashCode();else{bO=[0];for(var bQ in bN)if(function(bR){bO[0]=F.hashMix(F.hashMix(bO[0],F.hashString(bR)),F.Hash(bN[bR]));return false;}(bQ))break;return bO[0];}};F.hashMix=function(bN,bO){return(bN<<5)+bN+bO;};F.Compare=function(bN,bO){var bP,bQ,bR,bS,bT,bU;if(bN===bO)return 0;else{bQ=typeof bN;switch(bQ=="function"?1:bQ=="boolean"?2:bQ=="number"?2:bQ=="string"?2:bQ=="object"?3:0){case 0:return typeof bO=="undefined"?0:-1;case 1:return e.FailWith("Cannot compare function values.");case 2:return bN<bO?-1:1;case 3:if(bN===null)bR=-1;else if(bO===null)bR=1;else if("CompareTo"in bN)bR=bN.CompareTo(bO);else if("CompareTo0"in bN)bR=bN.CompareTo0(bO);else if(bN instanceof a.Array&&bO instanceof a.Array)bR=F.compareArrays(bN,bO);else if(bN instanceof bL&&bO instanceof bL)bR=F.compareDates(bN,bO);else{bS=[0];for(var bV in bN)if(function(bW){return!bN.hasOwnProperty(bW)?false:!bO.hasOwnProperty(bW)?(bS[0]=1,true):(bS[0]=F.Compare(bN[bW],bO[bW]),bS[0]!==0);}(bV))break;if(bS[0]===0){for(var bW in bO)if(function(bX){return!bO.hasOwnProperty(bX)?false:!bN.hasOwnProperty(bX)&&(bS[0]=-1,true);}(bW))break;}bR=bS[0];}return bR;}}};F.compareArrays=function(bN,bO){var bP,bQ;if(x.length(bN)<x.length(bO))return -1;else if(x.length(bN)>x.length(bO))return 1;else{bP=0;bQ=0;while(bP===0&&bQ<x.length(bN)){bP=F.Compare(x.get(bN,bQ),x.get(bO,bQ));bQ=bQ+1;}return bP;}};F.compareDates=function(bN,bO){return F.Compare(bN.getTime(),bO.getTime());};K=J.Dictionary=bJ.Class({set_Item:function(bN,bO){this.set(bN,bO);},ContainsKey:function(bN){var bO,bP;bO=this;bP=this.data[this.hash(bN)];return bP==null?false:x.exists(function(bQ){return bO.equals.apply(null,[(e.KeyValue(bQ))[0],bN]);},bP);},TryGetValue:function(bN,bO){var bP,bQ,bR;bP=this;bQ=this.data[this.hash(bN)];return bQ==null?false:(bR=x.tryPick(function(bS){var bT;bT=e.KeyValue(bS);return bP.equals.apply(null,[bT[0],bN])?{$:1,$0:bT[1]}:null;},bQ),bR!=null&&bR.$==1&&(bO.set(bR.$0),true));},Remove:function(bN){return this.remove(bN);},get_Keys:function(){return new _2.New(this);},set:function(bN,bO){var bP,bQ,bR,bS;bP=this;bQ=this.hash(bN);bR=this.data[bQ];bR==null?(this.count=this.count+1,this.data[bQ]=new a.Array({K:bN,V:bO})):(bS=x.tryFindIndex(function(bT){return bP.equals.apply(null,[(e.KeyValue(bT))[0],bN]);},bR),bS==null?(this.count=this.count+1,bR.push({K:bN,V:bO})):bR[bS.$0]={K:bN,V:bO});},remove:function(bN){var bO,bP,bQ,bR;bO=this;bP=this.hash(bN);bQ=this.data[bP];return bQ==null?false:(bR=x.filter(function(bS){return!bO.equals.apply(null,[(e.KeyValue(bS))[0],bN]);},bQ),x.length(bR)<bQ.length&&(this.count=this.count-1,this.data[bP]=bR,true));},get_Item:function(bN){return this.get(bN);},get:function(bN){var bO,bP;bO=this;bP=this.data[this.hash(bN)];return bP==null?Y.notPresent():x.pick(function(bQ){var bR;bR=e.KeyValue(bQ);return bO.equals.apply(null,[bR[0],bN])?{$:1,$0:bR[1]}:null;},bP);},GetEnumerator:function(){return X.Get0(this);},GetEnumerator0:function(){return X.Get0(x.concat(y.GetFieldValues(this.data)));}},f,K);K.New$5=bJ.Ctor(function(){K.New$6.call(this,[],F.Equals,F.Hash);},K);K.New$6=bJ.Ctor(function(bN,bO,bP){var bQ,bR;f.New.call(this);this.equals=bO;this.hash=bP;this.count=0;this.data=[];bQ=X.Get(bN);try{while(bQ.MoveNext()){bR=bQ.Current();this.set(bR.K,bR.V);}}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}},K);B.Obsolete=function(bN){var bO,bP,bQ,bR,bS;bP=bN.s;if(bP==null||(bP!=null&&bP.$==2?(bO=bP.$1,false):bP!=null&&bP.$==3?(bO=bP.$1,false):true))void 0;else{bN.s=null;for(bQ=0,bR=x.length(bO)-1;bQ<=bR;bQ++){bS=x.get(bO,bQ);typeof bS=="object"?function(bT){B.Obsolete(bT);}(bS):bS();}}};B.New=function(bN){return{s:bN};};L=g.ConcreteVar=bJ.Class({Set:function(bN){if(this.isConst)(function(bO){return bO("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bO){bM.log(bO);}));else{B.Obsolete(this.snap);this.current=bN;this.snap=B.New({$:2,$0:bN,$1:[]});}},get_View:function(){return this.view;},Get:function(){return this.current;},UpdateMaybe:function(bN){var bO;bO=bN(this.Get());bO!=null&&bO.$==1?this.Set(bO.$0):void 0;}},h,L);L.New=bJ.Ctor(function(bN,bO,bP){var bQ;bQ=this;h.New.call(this);this.isConst=bN;this.current=bP;this.snap=bO;this.view=function(){return bQ.snap;};this.id=U.Int();},L);n=g.View=bJ.Class({},null,n);M.DatePortion=function(bN){var bO;bO=new bL(bN);return(new bL(bO.getFullYear(),bO.getMonth(),bO.getDate())).getTime();};N.$cctor=function(){N.$cctor=a.ignore;N.LoadedTemplates=new K.New$5();N.LocalTemplatesLoaded=false;N.GlobalHoles=new K.New$5();N.TextHoleRE="\\${([^}]+)}";N.RenderedFullDocTemplate=null;};O=J.HashSet=bJ.Class({Add:function(bN){return this.add(bN);},Contains:function(bN){var bO;bO=this.data[this.hash(bN)];return bO==null?false:this.arrContains(bN,bO);},add:function(bN){var bO,bP;bO=this.hash(bN);bP=this.data[bO];return bP==null?(this.data[bO]=[bN],this.count=this.count+1,true):this.arrContains(bN,bP)?false:(bP.push(bN),this.count=this.count+1,true);},arrContains:function(bN,bO){var bP,bQ,bR,bS;bP=true;bQ=0;bS=bO.length;while(bP&&bQ<bS)if(this.equals.apply(null,[bO[bQ],bN]))bP=false;else bQ=bQ+1;return!bP;},ExceptWith:function(bN){var bO;bO=X.Get(bN);try{while(bO.MoveNext())this.Remove(bO.Current());}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bN){var bO,bP,bQ,bR;bO=0;bP=bo.concat(this.data);for(bQ=0,bR=bP.length-1;bQ<=bR;bQ++)x.set(bN,bQ,bP[bQ]);},IntersectWith:function(bN){var bO,bP,bQ,bR,bS;bO=new O.New$4(bN,this.equals,this.hash);bP=bo.concat(this.data);for(bQ=0,bR=bP.length-1;bQ<=bR;bQ++){bS=bP[bQ];!bO.Contains(bS)?this.Remove(bS):void 0;}},Remove:function(bN){var bO;bO=this.data[this.hash(bN)];return bO==null?false:this.arrRemove(bN,bO)&&(this.count=this.count-1,true);},arrRemove:function(bN,bO){var bP,bQ,bR,bS;bP=true;bQ=0;bS=bO.length;while(bP&&bQ<bS)if(this.equals.apply(null,[bO[bQ],bN])){bO.splice.apply(bO,[bQ,1]);bP=false;}else bQ=bQ+1;return!bP;},GetEnumerator:function(){return X.Get(bo.concat(this.data));},GetEnumerator0:function(){return X.Get(bo.concat(this.data));}},f,O);O.New$3=bJ.Ctor(function(){O.New$4.call(this,[],F.Equals,F.Hash);},O);O.New$4=bJ.Ctor(function(bN,bO,bP){var bQ;f.New.call(this);this.equals=bO;this.hash=bP;this.data=[];this.count=0;bQ=X.Get(bN);try{while(bQ.MoveNext())this.add(bQ.Current());}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}},O);O.New$2=bJ.Ctor(function(bN){O.New$4.call(this,bN,F.Equals,F.Hash);},O);P.head=function(bN){var bO;bO=X.Get(bN);try{return bO.MoveNext()?bO.Current():P.insufficient();}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}};P.fold=function(bN,bO,bP){var bQ,bR;bQ=bO;bR=X.Get(bP);try{while(bR.MoveNext())bQ=bN(bQ,bR.Current());return bQ;}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}};P.iter=function(bN,bO){var bP;bP=X.Get(bO);try{while(bP.MoveNext())bN(bP.Current());}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};P.map=function(bN,bO){return{GetEnumerator:function(){var bP;bP=X.Get(bO);return new bk.New(null,null,function(bQ){return bP.MoveNext()&&(bQ.c=bN(bP.Current()),true);},function(){bP.Dispose();});}};};P.max=function(bN){var bO,bP,bQ;bO=X.Get(bN);try{if(!bO.MoveNext())P.seqEmpty();bP=bO.Current();while(bO.MoveNext()){bQ=bO.Current();F.Compare(bQ,bP)===1?bP=bQ:void 0;}return bP;}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}};P.forall=function(bN,bO){return!P.exists(function(bP){return!bN(bP);},bO);};P.seqEmpty=function(){return e.FailWith("The input sequence was empty.");};P.exists=function(bN,bO){var bP,bQ;bP=X.Get(bO);try{bQ=false;while(!bQ&&bP.MoveNext())bQ=bN(bP.Current());return bQ;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};Q.LinkElement=function(bN,bO){Q.InsertDoc(bN,bO,null);};Q.CreateTextNode=function(){return{Text:self.document.createTextNode(""),Dirty:false,Value:""};};Q.UpdateTextNode=function(bN,bO){bN.Value=bO;bN.Dirty=true;};Q.InsertDoc=function(bN,bO,bP){var bQ;return bO!=null&&bO.$==1?Q.InsertNode(bN,bO.$0.El,bP):bO!=null&&bO.$==2?(bQ=bO.$0,(bQ.Dirty=false,Q.InsertDoc(bN,bQ.Current,bP))):bO==null?bP:bO!=null&&bO.$==4?Q.InsertNode(bN,bO.$0.Text,bP):bO!=null&&bO.$==5?Q.InsertNode(bN,bO.$0,bP):bO!=null&&bO.$==6?x.foldBack(function(bR,bS){return bR==null||bR.constructor===Z?Q.InsertDoc(bN,bR,bS):Q.InsertNode(bN,bR,bS);},bO.$0.Els,bP):Q.InsertDoc(bN,bO.$0,Q.InsertDoc(bN,bO.$1,bP));};Q.CreateRunState=function(bN,bO){return bc.New(bd.get_Empty(),Q.CreateElemNode(bN,C.EmptyAttr(),bO));};Q.PerformAnimatedUpdate=function(bN,bO,bP){var bQ;return _4.get_UseAnimations()?(bQ=null,be.Delay(function(){var bR,bS,bT;bR=bd.FindAll(bP);bS=Q.ComputeChangeAnim(bO,bR);bT=Q.ComputeEnterAnim(bO,bR);return be.Bind(_4.Play(_4.Append(bS,Q.ComputeExitAnim(bO,bR))),function(){return be.Bind(Q.SyncElemNodesNextFrame(bN,bO),function(){return be.Bind(_4.Play(bT),function(){bO.PreviousNodes=bR;return be.Return(null);});});});})):Q.SyncElemNodesNextFrame(bN,bO);};Q.PerformSyncUpdate=function(bN,bO,bP){var bQ;bQ=bd.FindAll(bP);Q.SyncElemNode(bN,bO.Top);bO.PreviousNodes=bQ;};Q.CreateElemNode=function(bN,bO,bP){var bQ;Q.LinkElement(bN,bP);bQ=C.Insert(bN,bO);return V.New(bQ,bP,null,bN,U.Int(),bJ.GetOptional(bQ.OnAfterRender));};Q.InsertNode=function(bN,bO,bP){E.InsertAt(bN,bP,bO);return bO;};Q.SyncElemNodesNextFrame=function(bN,bO){function bP(bQ){a.requestAnimationFrame(function(){Q.SyncElemNode(bN,bO.Top);bQ();});}return _5.BatchUpdatesEnabled()?be.FromContinuations(function(bQ,bR,bS){return bP.apply(null,[bQ,bR,bS]);}):(Q.SyncElemNode(bN,bO.Top),be.Return(null));};Q.ComputeExitAnim=function(bN,bO){return _4.Concat(x.map(function(bP){return C.GetExitAnim(bP.Attr);},bd.ToArray(bd.Except(bO,bd.Filter(function(bP){return C.HasExitAnim(bP.Attr);},bN.PreviousNodes)))));};Q.ComputeEnterAnim=function(bN,bO){return _4.Concat(x.map(function(bP){return C.GetEnterAnim(bP.Attr);},bd.ToArray(bd.Except(bN.PreviousNodes,bd.Filter(function(bP){return C.HasEnterAnim(bP.Attr);},bO)))));};Q.ComputeChangeAnim=function(bN,bO){var bP;function bQ(bR){return C.HasChangeAnim(bR.Attr);}bP=function(bR){return bd.Filter(bQ,bR);};return _4.Concat(x.map(function(bR){return C.GetChangeAnim(bR.Attr);},bd.ToArray(bd.Intersect(bP(bN.PreviousNodes),bP(bO)))));};Q.SyncElemNode=function(bN,bO){!bN?Q.SyncElement(bO):void 0;Q.Sync(bO.Children);Q.AfterRender(bO);};Q.SyncElement=function(bN){function bO(bP){function bQ(bR){var bS,bT;return bR!=null&&bR.$==0?bQ(bR.$0)||bQ(bR.$1):bR!=null&&bR.$==2?(bS=bR.$0,bS.Dirty||bQ(bS.Current)):bR!=null&&bR.$==6&&(bT=bR.$0,bT.Dirty||x.exists(bO,bT.Holes));}return bQ(bP.Children);}C.Sync(bN.El,bN.Attr);bO(bN)?Q.DoSyncElement(bN):void 0;};Q.Sync=function(bN){var bO,bP;if(bN!=null&&bN.$==1)Q.SyncElemNode(false,bN.$0);else if(bN!=null&&bN.$==2)Q.Sync(bN.$0.Current);else if(bN==null);else if(bN!=null&&bN.$==5);else if(bN!=null&&bN.$==4){bO=bN.$0;bO.Dirty?(bO.Text.nodeValue=bO.Value,bO.Dirty=false):void 0;}else if(bN!=null&&bN.$==6){bP=bN.$0;x.iter(function(bQ){Q.SyncElemNode(false,bQ);},bP.Holes);x.iter(function(bQ){C.Sync(bQ[0],bQ[1]);},bP.Attrs);Q.AfterRender(bP);}else{Q.Sync(bN.$0);Q.Sync(bN.$1);}};Q.AfterRender=function(bN){var bO;bO=bJ.GetOptional(bN.Render);bO!=null&&bO.$==1?(bO.$0(bN.El),bJ.SetOptional(bN,"Render",null)):void 0;};Q.DoSyncElement=function(bN){var bO,bP,bQ;function bR(bS,bT){var bU,bV;return bS!=null&&bS.$==1?bS.$0.El:bS!=null&&bS.$==2?(bU=bS.$0,bU.Dirty?(bU.Dirty=false,Q.InsertDoc(bO,bU.Current,bT)):bR(bU.Current,bT)):bS==null?bT:bS!=null&&bS.$==4?bS.$0.Text:bS!=null&&bS.$==5?bS.$0:bS!=null&&bS.$==6?(bV=bS.$0,(bV.Dirty?bV.Dirty=false:void 0,x.foldBack(function(bW,bX){return bW==null||bW.constructor===Z?bR(bW,bX):bW;},bV.Els,bT))):bR(bS.$0,bR(bS.$1,bT));}bO=bN.El;bA.Iter((bP=bN.El,function(bS){E.RemoveNode(bP,bS);}),bA.Except(bA.DocChildren(bN),bA.Children(bN.El,bJ.GetOptional(bN.Delimiters))));bR(bN.Children,(bQ=bJ.GetOptional(bN.Delimiters),bQ!=null&&bQ.$==1?bQ.$0[1]:null));};R=g.Elt=bJ.Class({},q,R);R.New=function(bN,bO,bP){var bQ,bR;bQ=Q.CreateElemNode(bN,bO,bP.docNode);bR=_7.Create(bP.updates);return new R.New$1({$:1,$0:bQ},n.Map2Unit(C.Updates(bQ.Attr),bR.v),bN,bR);};R.New$1=bJ.Ctor(function(bN,bO,bP,bQ){q.New.call(this,bN,bO);this.docNode$1=bN;this.updates$1=bO;this.elt=bP;this.rvUpdates=bQ;},R);S.ofSeqNonCopying=function(bN){var bO,bP;if(bN instanceof a.Array)return bN;else if(bN instanceof _9)return x.ofList(bN);else if(bN===null)return[];else{bO=[];bP=X.Get(bN);try{while(bP.MoveNext())bO.push(bP.Current());return bO;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}}};S.TreeReduce=function(bN,bO,bP){var bQ;function bR(bS,bT){var bU,bV;return bT<=0?bN:bT===1&&(bS>=0&&bS<bQ)?x.get(bP,bS):(bV=bT/2>>0,bO(bR(bS,bV),bR(bS+bV,bT-bV)));}bQ=x.length(bP);return bR(0,bQ);};S.MapTreeReduce=function(bN,bO,bP,bQ){var bR;function bS(bT,bU){var bV,bW;return bU<=0?bO:bU===1&&(bT>=0&&bT<bR)?bN(x.get(bQ,bT)):(bW=bU/2>>0,bP(bS(bT,bW),bS(bT+bW,bU-bW)));}bR=x.length(bQ);return bS(0,bR);};U.Int=function(){U.set_counter(U.counter()+1);return U.counter();};U.set_counter=function(bN){bj.$cctor();bj.counter=bN;};U.counter=function(){bj.$cctor();return bj.counter;};V=g.DocElemNode=bJ.Class({Equals:function(bN){return this.ElKey===bN.ElKey;},GetHashCode:function(){return this.ElKey;}},null,V);V.New=function(bN,bO,bP,bQ,bR,bS){var bT;return new V((bT={Attr:bN,Children:bO,El:bQ,ElKey:bR},(bJ.SetOptional(bT,"Delimiters",bP),bJ.SetOptional(bT,"Render",bS),bT)));};x.ofSeq=function(bN){var bO,bP;if(bN instanceof a.Array)return bN.slice();else if(bN instanceof _9)return x.ofList(bN);else{bO=[];bP=X.Get(bN);try{while(bP.MoveNext())bO.push(bP.Current());return bO;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}}};x.exists=function(bN,bO){var bP,bQ,bR,bS;bP=false;bQ=0;bS=x.length(bO);while(!bP&&bQ<bS)if(bN(bO[bQ]))bP=true;else bQ=bQ+1;return bP;};x.tryPick=function(bN,bO){var bP,bQ,bR;bP=null;bQ=0;while(bQ<bO.length&&bP==null){bR=bN(bO[bQ]);bR!=null&&bR.$==1?bP=bR:void 0;bQ=bQ+1;}return bP;};x.tryFindIndex=function(bN,bO){var bP,bQ;bP=null;bQ=0;while(bQ<bO.length&&bP==null){bN(bO[bQ])?bP={$:1,$0:bQ}:void 0;bQ=bQ+1;}return bP;};x.ofList=function(bN){var bO,bP;bP=[];bO=bN;while(!(bO.$==0)){bP.push(_8.head(bO));bO=_8.tail(bO);}return bP;};x.filter=function(bN,bO){var bP,bQ,bR;bP=[];for(bQ=0,bR=bO.length-1;bQ<=bR;bQ++)if(bN(bO[bQ]))bP.push(bO[bQ]);return bP;};x.map=function(bN,bO){var bP,bQ,bR;bP=new a.Array(bO.length);for(bQ=0,bR=bO.length-1;bQ<=bR;bQ++)bP[bQ]=bN(bO[bQ]);return bP;};x.iter=function(bN,bO){var bP,bQ;for(bP=0,bQ=bO.length-1;bP<=bQ;bP++)bN(bO[bP]);};x.foldBack=function(bN,bO,bP){var bQ,bR,bS,bT,bU;bQ=bP;bS=bO.length;for(bT=1,bU=bS;bT<=bU;bT++)bQ=bN(bO[bS-bT],bQ);return bQ;};x.concat=function(bN){return a.Array.prototype.concat.apply([],x.ofSeq(bN));};x.pick=function(bN,bO){var bP;bP=x.tryPick(bN,bO);return bP==null?e.FailWith("KeyNotFoundException"):bP.$0;};x.choose=function(bN,bO){var bP,bQ,bR,bS;bP=[];for(bQ=0,bR=bO.length-1;bQ<=bR;bQ++){bS=bN(bO[bQ]);bS==null?void 0:bP.push(bS.$0);}return bP;};x.create=function(bN,bO){var bP,bQ,bR;bP=new a.Array(bN);for(bQ=0,bR=bN-1;bQ<=bR;bQ++)bP[bQ]=bO;return bP;};x.init=function(bN,bO){var bP,bQ,bR;bN<0?e.FailWith("Negative size given."):null;bP=new a.Array(bN);for(bQ=0,bR=bN-1;bQ<=bR;bQ++)bP[bQ]=bO(bQ);return bP;};x.forall=function(bN,bO){var bP,bQ,bR,bS;bP=true;bQ=0;bS=x.length(bO);while(bP&&bQ<bS)if(bN(bO[bQ]))bQ=bQ+1;else bP=false;return bP;};X.Get=function(bN){return bN instanceof a.Array?X.ArrayEnumerator(bN):F.Equals(typeof bN,"string")?X.StringEnumerator(bN):bN.GetEnumerator();};X.ArrayEnumerator=function(bN){return new bk.New(0,null,function(bO){var bP;bP=bO.s;return bP<x.length(bN)&&(bO.c=x.get(bN,bP),bO.s=bP+1,true);},void 0);};X.StringEnumerator=function(bN){return new bk.New(0,null,function(bO){var bP;bP=bO.s;return bP<bN.length&&(bO.c=bN[bP],bO.s=bP+1,true);},void 0);};X.Get0=function(bN){return bN instanceof a.Array?X.ArrayEnumerator(bN):F.Equals(typeof bN,"string")?X.StringEnumerator(bN):"GetEnumerator0"in bN?bN.GetEnumerator0():bN.GetEnumerator();};Y.notPresent=function(){return e.FailWith("The given key was not present in the dictionary.");};_0.convertTextNode=function(bN){var bO,bP,bQ,bR,bS,bT;bO=null;bP=0;bR=bN.textContent;bS=new a.RegExp(A.TextHoleRE(),"g");while(bO=bS.exec(bR),bO!==null){bN.parentNode.insertBefore(self.document.createTextNode(_1.string(bR,{$:1,$0:bP},{$:1,$0:bS.lastIndex-x.get(bO,0).length-1})),bN);bP=bS.lastIndex;bT=self.document.createElement("span");bT.setAttribute("ws-replace",x.get(bO,1).toLowerCase());bN.parentNode.insertBefore(bT,bN);}bS.lastIndex=0;bN.textContent=_1.string(bR,{$:1,$0:bP},null);};_0.failNotLoaded=function(bN){bM.warn("Instantiating non-loaded template",bN);};_0.fillTextHole=function(bN,bO,bP){var bQ;bQ=bN.querySelector("[ws-replace]");return F.Equals(bQ,null)?(bM.warn("Filling non-existent text hole",bP),null):(bQ.parentNode.replaceChild(self.document.createTextNode(bO),bQ),{$:1,$0:bQ.getAttribute("ws-replace")});};_0.removeHolesExcept=function(bN,bO){function bP(bQ){A.foreachNotPreserved(bN,"["+bQ+"]",function(bR){if(!bO.Contains(bR.getAttribute(bQ)))bR.removeAttribute(bQ);});}bP("ws-attr");bP("ws-onafterrender");bP("ws-var");A.foreachNotPreserved(bN,"[ws-hole]",function(bQ){if(!bO.Contains(bQ.getAttribute("ws-hole"))){bQ.removeAttribute("ws-hole");while(bQ.hasChildNodes())bQ.removeChild(bQ.lastChild);}});A.foreachNotPreserved(bN,"[ws-replace]",function(bQ){if(!bO.Contains(bQ.getAttribute("ws-replace")))bQ.parentNode.removeChild(bQ);});A.foreachNotPreserved(bN,"[ws-on]",function(bQ){bQ.setAttribute("ws-on",ba.concat(" ",x.filter(function(bR){return bO.Contains(x.get(ba.SplitChars(bR,[":"],1),1));},ba.SplitChars(bQ.getAttribute("ws-on"),[" "],1))));});A.foreachNotPreserved(bN,"[ws-attr-holes]",function(bQ){var bR,bS,bT,bU,bV;bR=ba.SplitChars(bQ.getAttribute("ws-attr-holes"),[" "],1);for(bS=0,bT=bR.length-1;bS<=bT;bS++){bU=x.get(bR,bS);bQ.setAttribute(bU,(bV=new a.RegExp(A.TextHoleRE(),"g"),bQ.getAttribute(bU).replace(bV,function(bW,bX){return bO.Contains(bX)?bW:"";})));}});};_0.fillInstanceAttrs=function(bN,bO){var bP,bQ,bR,bS,bT;_0.convertAttrs(bO);bP=bO.nodeName.toLowerCase();bQ=bN.querySelector("[ws-attr="+bP+"]");if(F.Equals(bQ,null))bM.warn("Filling non-existent attr hole",bP);else{bQ.removeAttribute("ws-attr");for(bR=0,bS=bO.attributes.length-1;bR<=bS;bR++){bT=bO.attributes.item(bR);bT.name==="class"&&bQ.hasAttribute("class")?bQ.setAttribute("class",bQ.getAttribute("class")+" "+bT.nodeValue):bQ.setAttribute(bT.name,bT.nodeValue);}}};_0.mapHoles=function(bN,bO){function bP(bQ){A.foreachNotPreserved(bN,"["+bQ+"]",function(bR){var bS,bT;bS=(bT=null,[bO.TryGetValue(bR.getAttribute(bQ).toLowerCase(),{get:function(){return bT;},set:function(bU){bT=bU;}}),bT]);bS[0]?bR.setAttribute(bQ,bS[1]):void 0;});}bP("ws-hole");bP("ws-replace");bP("ws-attr");bP("ws-onafterrender");bP("ws-var");A.foreachNotPreserved(bN,"[ws-on]",function(bQ){bQ.setAttribute("ws-on",ba.concat(" ",x.map(function(bR){var bS,bT,bU;bS=ba.SplitChars(bR,[":"],1);bT=(bU=null,[bO.TryGetValue(x.get(bS,1),{get:function(){return bU;},set:function(bV){bU=bV;}}),bU]);return bT[0]?x.get(bS,0)+":"+bT[1]:bR;},ba.SplitChars(bQ.getAttribute("ws-on"),[" "],1))));});A.foreachNotPreserved(bN,"[ws-attr-holes]",function(bQ){var bR,bS,bT;bR=ba.SplitChars(bQ.getAttribute("ws-attr-holes"),[" "],1);for(bS=0,bT=bR.length-1;bS<=bT;bS++)(function(){var bU;function bV(bW,bX){var bY;bY=e.KeyValue(bX);return bW.replace(new a.RegExp("\\${"+bY[0]+"}","ig"),"${"+bY[1]+"}");}bU=x.get(bR,bS);return bQ.setAttribute(bU,(((bJ.Curried3(P.fold))(bV))(bQ.getAttribute(bU)))(bO));}());});};_0.fill=function(bN,bO,bP){while(true)if(bN.hasChildNodes())bP=bO.insertBefore(bN.lastChild,bP);else return null;};_0.convertAttrs=function(bN){var bP,bQ,bR,bS,bT,bU,bV,bW;function bO(bX){var bY;bY=bN.getAttribute(bX);bY===null?void 0:bN.setAttribute(bX,bY.toLowerCase());}bP=bN.attributes;bQ=[];bR=[];bS=[];for(bT=0,bU=bP.length-1;bT<=bU;bT++){bV=bP.item(bT);ba.StartsWith(bV.nodeName,"ws-on")&&bV.nodeName!=="ws-onafterrender"&&bV.nodeName!=="ws-on"?(bQ.push(bV.nodeName),bR.push(_1.string(bV.nodeName,{$:1,$0:"ws-on".length},null)+":"+bV.nodeValue.toLowerCase())):!ba.StartsWith(bV.nodeName,"ws-")&&(new a.RegExp(A.TextHoleRE())).test(bV.nodeValue)?(bV.nodeValue=(bW=new a.RegExp(A.TextHoleRE(),"g"),bV.nodeValue.replace(bW,function(bX,bY){return"${"+bY.toLowerCase()+"}";})),bS.push(bV.nodeName)):void 0;}!(bR.length==0)?bN.setAttribute("ws-on",ba.concat(" ",bR)):void 0;!(bS.length==0)?bN.setAttribute("ws-attr-holes",ba.concat(" ",bS)):void 0;bO("ws-hole");bO("ws-replace");bO("ws-attr");bO("ws-onafterrender");bO("ws-var");x.iter(function(bX){bN.removeAttribute(bX);},bQ);};_1.string=function(bN,bO,bP){return bO==null?bP!=null&&bP.$==1?bN.slice(0,bP.$0+1):"":bP==null?bN.slice(bO.$0):bN.slice(bO.$0,bP.$0+1);};P.insufficient=function(){return e.FailWith("The input sequence has an insufficient number of elements.");};_2=J.KeyCollection=bJ.Class({GetEnumerator$1:function(){return X.Get(P.map(function(bN){return bN.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},f,_2);_2.New=bJ.Ctor(function(bN){f.New.call(this);this.d=bN;},_2);_3.TryParseInt32=function(bN,bO){return _3.TryParse(bN,-2147483648,2147483647,bO);};_4.get_UseAnimations=function(){return bf.UseAnimations();};_4.Play=function(bN){var bO;bO=null;return be.Delay(function(){return be.Bind(_4.Run(a.ignore,bf.Actions(bN)),function(){bf.Finalize(bN);return be.Return(null);});});};_4.Append=function(bN,bO){return{$:0,$0:bn.Append(bN.$0,bO.$0)};};_4.Run=function(bN,bO){var bP;function bQ(bR){function bS(bT,bU){var bV;bV=bU-bT;bO.Compute(bV);bN();return bV<=bP?void a.requestAnimationFrame(function(bW){bS(bT,bW);}):bR();}a.requestAnimationFrame(function(bT){bS(bT,bT);});}bP=bO.Duration;return bP===0?be.Zero():be.FromContinuations(function(bR,bS,bT){return bQ.apply(null,[bR,bS,bT]);});};_4.Concat=function(bN){return{$:0,$0:bn.Concat(P.map(bf.List,bN))};};_5.BatchUpdatesEnabled=function(){bg.$cctor();return bg.BatchUpdatesEnabled;};_6.StartProcessor=function(bN){var bO;function bP(){var bQ;bQ=null;return be.Delay(function(){return be.Bind(bN,function(){var bR;bR=bO[0];return bR===1?(bO[0]=0,be.Zero()):bR===2?(bO[0]=1,bP()):be.Zero();});});}bO=[0];return function(){var bQ;bQ=bO[0];bQ===0?(bO[0]=1,be.Start(bP(),null)):bQ===1?bO[0]=2:void 0;};};_7=g.Updates=bJ.Class({},null,_7);_7.Create=function(bN){var bO;bO=null;bO=_7.New(bN,null,function(){var bP;bP=bO.s;return bP===null?(bP=B.Copy(bO.c()),bO.s=bP,B.WhenObsoleteRun(bP,function(){bO.s=null;}),bP):bP;});return bO;};_7.New=function(bN,bO,bP){return new _7({c:bN,s:bO,v:bP});};_9=_8.T=bJ.Class({GetEnumerator:function(){return new bk.New(this,null,function(bN){var bO;bO=bN.s;return bO.$==0?false:(bN.c=bO.$0,bN.s=bO.$1,true);},void 0);},GetEnumerator0:function(){return X.Get(this);}},null,_9);$.New=function(bN,bO,bP,bQ){var bR;bR={DynElem:bN,DynFlags:bO,DynNodes:bP};bJ.SetOptional(bR,"OnAfterRender",bQ);return bR;};ba.concat=function(bN,bO){return x.ofSeq(bO).join(bN);};ba.SplitChars=function(bN,bO,bP){return ba.Split(bN,new a.RegExp("["+ba.RegexEscape(bO.join(""))+"]"),bP);};ba.StartsWith=function(bN,bO){return bN.substring(0,bO.length)==bO;};ba.Split=function(bN,bO,bP){return bP===1?x.filter(function(bQ){return bQ!=="";},ba.SplitWith(bN,bO)):ba.SplitWith(bN,bO);};ba.RegexEscape=function(bN){return bN.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};ba.SplitWith=function(bN,bO){return bN.split(bO);};ba.forall=function(bN,bO){return P.forall(bN,ba.protect(bO));};ba.protect=function(bN){return bN===null?"":bN;};bc.New=function(bN,bO){return{PreviousNodes:bN,Top:bO};};bd.get_Empty=function(){return{$:0,$0:new O.New$3()};};bd.FindAll=function(bN){var bO;function bP(bR){if(bR!=null&&bR.$==0){bP(bR.$0);bP(bR.$1);}else if(bR!=null&&bR.$==1)bQ(bR.$0);else if(bR!=null&&bR.$==2)bP(bR.$0.Current);else if(bR!=null&&bR.$==6)x.iter(bQ,bR.$0.Holes);}function bQ(bR){bO.push(bR);bP(bR.Children);}bO=[];bP(bN);return{$:0,$0:new O.New$2(bO)};};bd.Filter=function(bN,bO){return{$:0,$0:bx.Filter(bN,bO.$0)};};bd.Except=function(bN,bO){return{$:0,$0:bx.Except(bN.$0,bO.$0)};};bd.ToArray=function(bN){return bx.ToArray(bN.$0);};bd.Intersect=function(bN,bO){return{$:0,$0:bx.Intersect(bN.$0,bO.$0)};};be.Delay=function(bN){return function(bO){try{(bN(null))(bO);}catch(bP){bO.k({$:1,$0:bP});}};};be.Bind=function(bN,bO){return be.checkCancel(function(bP){bN(bu.New(function(bQ){var bR;if(bQ.$==0){bR=bQ.$0;be.scheduler().Fork(function(){try{(bO(bR))(bP);}catch(bS){bP.k({$:1,$0:bS});}});}else be.scheduler().Fork(function(){bP.k(bQ);});},bP.ct));});};be.Zero=function(){bv.$cctor();return bv.Zero;};be.Start=function(bN,bO){var bP,bQ;bP=(bQ=(be.defCTS())[0],bO==null?bQ:bO.$0);be.scheduler().Fork(function(){if(!bP.c)bN(bu.New(function(bR){if(bR.$==1)be.UncaughtAsyncError(bR.$0);},bP));});};be.Return=function(bN){return function(bO){bO.k({$:0,$0:bN});};};be.scheduler=function(){bv.$cctor();return bv.scheduler;};be.checkCancel=function(bN){return function(bO){if(bO.ct.c)be.cancel(bO);else bN(bO);};};be.defCTS=function(){bv.$cctor();return bv.defCTS;};be.UncaughtAsyncError=function(bN){bM.log("WebSharper: Uncaught asynchronous exception",bN);};be.FromContinuations=function(bN){return function(bO){var bP;function bQ(bR){if(bP[0])e.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bP[0]=true;be.scheduler().Fork(bR);}}bP=[false];bN(function(bR){bQ(function(){bO.k({$:0,$0:bR});});},function(bR){bQ(function(){bO.k({$:1,$0:bR});});},function(bR){bQ(function(){bO.k({$:2,$0:bR});});});};};be.cancel=function(bN){bN.k({$:2,$0:new bC.New(bN.ct)});};bf.UseAnimations=function(){bm.$cctor();return bm.UseAnimations;};bf.Actions=function(bN){return bf.ConcatActions(x.choose(function(bO){return bO.$==1?{$:1,$0:bO.$0}:null;},bn.ToArray(bN.$0)));};bf.Finalize=function(bN){x.iter(function(bO){if(bO.$==0)bO.$0();},bn.ToArray(bN.$0));};bf.ConcatActions=function(bN){var bO,bP,bQ,bR;bO=S.ofSeqNonCopying(bN);bP=x.length(bO);return bP===0?bf.Const():bP===1?x.get(bO,0):(bQ=P.max(P.map(function(bS){return bS.Duration;},bO)),(bR=x.map(function(bS){return bf.Prolong(bQ,bS);},bO),bf.Def(bQ,function(bS){x.iter(function(bT){bT.Compute(bS);},bR);})));};bf.List=function(bN){return bN.$0;};bf.Const=function(bN){return bf.Def(0,function(){return bN;});};bf.Def=function(bN,bO){return{Compute:bO,Duration:bN};};bf.Prolong=function(bN,bO){var bP,bQ,bR;bP=bO.Compute;bQ=bO.Duration;bR=bD.Create(function(){return bO.Compute(bO.Duration);});return{Compute:function(bS){return bS>=bQ?bR.f():bP(bS);},Duration:bN};};bg.$cctor=function(){bg.$cctor=a.ignore;bg.BatchUpdatesEnabled=true;};bh.Clear=function(bN){bN.splice(0,x.length(bN));};_8.head=function(bN){return bN.$==1?bN.$0:_8.listEmpty();};_8.tail=function(bN){return bN.$==1?bN.$1:_8.listEmpty();};_8.listEmpty=function(){return e.FailWith("The input list was empty.");};bi.$cctor=function(){var bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW;bi.$cctor=a.ignore;bi.EmptyAttr=null;bi.BoolCheckedApply=bJ.Curried3(function(bX,bY,bZ){return[bY(function(b0){b0.addEventListener("change",function(){return!F.Equals(bX.Get(),b0.checked)?bX.Set(b0.checked):null;});}),bZ(function(b0){return function(b1){b0.checked=b1;};})];});bi.StringSet=function(bX){return function(bY){bX.value=bY;};};bi.StringGet=function(bX){return{$:1,$0:bX.value};};bi.StringApply=(bN=bp.StringGet(),(bO=bp.StringSet(),bJ.Curried(bp.ApplyValue,3,[bN,function(bX,bY){return(bO(bX))(bY);}])));bi.IntSetUnchecked=function(bX){return function(bY){bX.value=a.String(bY);};};bi.IntGetUnchecked=function(bX){var bY,bZ;bY=bX.value;return bq.isBlank(bY)?{$:1,$0:0}:(bZ=+bY,bZ!==bZ>>0?null:{$:1,$0:bZ});};bi.IntApplyUnchecked=(bP=bp.IntGetUnchecked(),(bQ=bp.IntSetUnchecked(),bJ.Curried(bp.ApplyValue,3,[bP,function(bX,bY){return(bQ(bX))(bY);}])));bi.IntSetChecked=function(bX){return function(bY){var bZ;bZ=bY.get_Input();return bX.value!==bZ?void(bX.value=bZ):null;};};bi.IntGetChecked=function(bX){var bY,bZ,b0;bY=bX.value;return{$:1,$0:bq.isBlank(bY)?(bX.checkValidity?bX.checkValidity():true)?new br({$:2,$0:bY}):new br({$:1,$0:bY}):(bZ=(b0=0,[_3.TryParseInt32(bY,{get:function(){return b0;},set:function(b1){b0=b1;}}),b0]),bZ[0]?new br({$:0,$0:bZ[1],$1:bY}):new br({$:1,$0:bY}))};};bi.IntApplyChecked=(bR=bp.IntGetChecked(),(bS=bp.IntSetChecked(),bJ.Curried(bp.ApplyValue,3,[bR,function(bX,bY){return(bS(bX))(bY);}])));bi.FloatSetUnchecked=function(bX){return function(bY){bX.value=a.String(bY);};};bi.FloatGetUnchecked=function(bX){var bY,bZ;bY=bX.value;return bq.isBlank(bY)?{$:1,$0:0}:(bZ=+bY,a.isNaN(bZ)?null:{$:1,$0:bZ});};bi.FloatApplyUnchecked=(bT=bp.FloatGetUnchecked(),(bU=bp.FloatSetUnchecked(),bJ.Curried(bp.ApplyValue,3,[bT,function(bX,bY){return(bU(bX))(bY);}])));bi.FloatSetChecked=function(bX){return function(bY){var bZ;bZ=bY.get_Input();return bX.value!==bZ?void(bX.value=bZ):null;};};bi.FloatGetChecked=function(bX){var bY,bZ;bY=bX.value;return{$:1,$0:bq.isBlank(bY)?(bX.checkValidity?bX.checkValidity():true)?new br({$:2,$0:bY}):new br({$:1,$0:bY}):(bZ=+bY,a.isNaN(bZ)?new br({$:1,$0:bY}):new br({$:0,$0:bZ,$1:bY}))};};bi.FloatApplyChecked=(bV=bp.FloatGetChecked(),(bW=bp.FloatSetChecked(),bJ.Curried(bp.ApplyValue,3,[bV,function(bX,bY){return(bW(bX))(bY);}])));};bj.$cctor=function(){bj.$cctor=a.ignore;bj.counter=0;};bk=X.T=bJ.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},f,bk);bk.New=bJ.Ctor(function(bN,bO,bP,bQ){f.New.call(this);this.s=bN;this.c=bO;this.n=bP;this.d=bQ;},bk);bl.$cctor=function(){var bN;bl.$cctor=a.ignore;bl.rxhtmlTag=new a.RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>","gi");bl.rtagName=new a.RegExp("<([\\w:]+)");bl.rhtml=new a.RegExp("<|&#?\\w+;");bl.wrapMap=(bN=[1,"<table>","</table>"],{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:bN,tbody:bN,tfoot:bN,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><colgroup>","</colgoup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"]});bl.defaultWrap=[0,"",""];};bm.$cctor=function(){bm.$cctor=a.ignore;bm.CubicInOut=bt.Custom(function(bN){var bO;bO=bN*bN;return 3*bO-2*(bO*bN);});bm.UseAnimations=true;};bn.Append=function(bN,bO){return bN.$==0?bO:bO.$==0?bN:{$:2,$0:bN,$1:bO};};bn.ToArray=function(bN){var bO;function bP(bQ){if(bQ.$==1)bO.push(bQ.$0);else if(bQ.$==2){bP(bQ.$0);bP(bQ.$1);}else if(bQ.$==3)x.iter(function(bR){bO.push(bR);},bQ.$0);}bO=[];bP(bN);return bO.slice(0);};bn.Concat=function(bN){var bO;bO=S.ofSeqNonCopying(bN);return S.TreeReduce(bn.Empty(),bn.Append,bO);};bn.Empty=function(){bE.$cctor();return bE.Empty;};bo.concat=function(bN){var bO,bP;bO=[];for(var bQ in bN)bO.push.apply(bO,bN[bQ]);return bO;};bp.ApplyValue=function(bN,bO,bP,bQ,bR){return[bQ(function(bS){function bT(){bP.UpdateMaybe(function(bU){var bV,bW;bV=bN(bS);return bV!=null&&bV.$==1&&(!F.Equals(bV.$0,bU)&&(bW=[bV,bV.$0],true))?bW[0]:null;});}bS.addEventListener("change",bT);bS.addEventListener("input",bT);bS.addEventListener("keypress",bT);}),bR(function(bS){return function(bT){var bU,bV;bU=bN(bS);return bU!=null&&bU.$==1&&(F.Equals(bU.$0,bT)&&(bV=bU.$0,true))?null:bO(bS,bT);};})];};bp.StringSet=function(){bi.$cctor();return bi.StringSet;};bp.StringGet=function(){bi.$cctor();return bi.StringGet;};bp.IntSetUnchecked=function(){bi.$cctor();return bi.IntSetUnchecked;};bp.IntGetUnchecked=function(){bi.$cctor();return bi.IntGetUnchecked;};bp.IntSetChecked=function(){bi.$cctor();return bi.IntSetChecked;};bp.IntGetChecked=function(){bi.$cctor();return bi.IntGetChecked;};bp.FloatSetUnchecked=function(){bi.$cctor();return bi.FloatSetUnchecked;};bp.FloatGetUnchecked=function(){bi.$cctor();return bi.FloatGetUnchecked;};bp.FloatSetChecked=function(){bi.$cctor();return bi.FloatSetChecked;};bp.FloatGetChecked=function(){bi.$cctor();return bi.FloatGetChecked;};bq.isBlank=function(bN){return ba.forall(by.IsWhiteSpace,bN);};br=g.CheckedInput=bJ.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,br);bs=be.Scheduler=bJ.Class({Fork:function(bN){var bO;bO=this;this.robin.push(bN);this.idle?(this.idle=false,a.setTimeout(function(){bO.tick();},0)):void 0;},tick:function(){var bN,bO,bP;bO=this;bP=bL.now();bN=true;while(bN)if(this.robin.length===0){this.idle=true;bN=false;}else{(this.robin.shift())();bL.now()-bP>40?(a.setTimeout(function(){bO.tick();},0),bN=false):void 0;}}},f,bs);bs.New=bJ.Ctor(function(){f.New.call(this);this.idle=true;this.robin=[];},bs);bt=g.Easing=bJ.Class({},f,bt);bt.Custom=function(bN){return new bt.New(bN);};bt.New=bJ.Ctor(function(bN){f.New.call(this);this.transformTime=bN;},bt);bu.New=function(bN,bO){return{k:bN,ct:bO};};bv.$cctor=function(){bv.$cctor=a.ignore;bv.noneCT=bw.New(false,[]);bv.scheduler=new bs.New();bv.defCTS=[new bz.New()];bv.Zero=be.Return();bv.GetCT=function(bN){bN.k({$:0,$0:bN.ct});};};bw.New=function(bN,bO){return{c:bN,r:bO};};bx.Filter=function(bN,bO){return new O.New$2(x.filter(bN,bx.ToArray(bO)));};bx.Except=function(bN,bO){var bP;bP=new O.New$2(bx.ToArray(bO));bP.ExceptWith(bx.ToArray(bN));return bP;};bx.ToArray=function(bN){var bO;bO=x.create(bN.get_Count(),void 0);bN.CopyTo(bO);return bO;};bx.Intersect=function(bN,bO){var bP;bP=new O.New$2(bx.ToArray(bN));bP.IntersectWith(bx.ToArray(bO));return bP;};by.IsWhiteSpace=function(bN){return bN.match(new a.RegExp("\\s"))!==null;};_3.TryParse=function(bN,bO,bP,bQ){var bR,bS;bR=+bN;bS=bR===bR-bR%1&&bR>=bO&&bR<=bP;bS?bQ.set(bR):void 0;return bS;};bz=d.CancellationTokenSource=bJ.Class({},f,bz);bz.New=bJ.Ctor(function(){f.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bz);bA.Children=function(bN,bO){var bP,bQ,bR;if(bO!=null&&bO.$==1){bR=[];bP=bO.$0[0].nextSibling;while(bP!==bO.$0[1]){bR.push(bP);bP=bP.nextSibling;}return{$:0,$0:bR};}else return{$:0,$0:x.init(bN.childNodes.length,(bQ=bN.childNodes,function(bS){return bQ[bS];}))};};bA.Except=function(bN,bO){var bP;bP=bN.$0;return{$:0,$0:x.filter(function(bQ){return x.forall(function(bR){return!(bQ===bR);},bP);},bO.$0)};};bA.Iter=function(bN,bO){x.iter(bN,bO.$0);};bA.DocChildren=function(bN){var bO;function bP(bQ){if(bQ!=null&&bQ.$==2)bP(bQ.$0.Current);else if(bQ!=null&&bQ.$==1)bO.push(bQ.$0.El);else if(bQ==null);else if(bQ!=null&&bQ.$==5)bO.push(bQ.$0);else if(bQ!=null&&bQ.$==4)bO.push(bQ.$0.Text);else if(bQ!=null&&bQ.$==6)x.iter(function(bR){if(bR==null||bR.constructor===Z)bP(bR);else bO.push(bR);},bQ.$0.Els);else{bP(bQ.$0);bP(bQ.$1);}}bO=[];bP(bN.Children);return{$:0,$0:S.ofSeqNonCopying(bO)};};bC=d.OperationCanceledException=bJ.Class({},bB,bC);bC.New=bJ.Ctor(function(bN){bC.New$1.call(this,"The operation was canceled.",null,bN);},bC);bC.New$1=bJ.Ctor(function(bN,bO,bP){this.message=bN;this.inner=bO;Z.setPrototypeOf(this,bC.prototype);this.ct=bP;},bC);bD.Create=function(bN){return bG.New(false,bN,bD.forceLazy);};bD.forceLazy=function(){var bN;bN=this.v();this.c=true;this.v=bN;this.f=bD.cachedLazy;return bN;};bD.cachedLazy=function(){return this.v;};bE.$cctor=function(){bE.$cctor=a.ignore;bE.Empty={$:0};};bG.New=function(bN,bO,bP){return{c:bN,v:bO,f:bP};};bJ.OnLoad(function(){c.Main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
