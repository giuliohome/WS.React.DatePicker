function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
/* https://github.com/jonathantneal/closest */
(function(w,p){p=w.Element.prototype
if(!p.matches){p.matches=p.msMatchesSelector||function(s){var m=(this.document||this.ownerDocument).querySelectorAll(s);for(var i=0;m[i]&&m[i]!==e;++i);return!!m[i]}}
if(!p.closest){p.closest=function(s){var e=this;while(e&&e.nodeType==1){if(e.matches(s))return e;e=e.parentNode}return null}}})(this);
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
import { DatePicker as a } from "https://unpkg.com/react-datepicker@0.53.0/dist/react-datepicker.js"
(function(){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8;b=self;c=b.SPA=b.SPA||{};d=c.Client=c.Client||{};e=b.WebSharper=b.WebSharper||{};f=e.Obj=e.Obj||{};g=e.UI=e.UI||{};h=g.Var$1=g.Var$1||{};i=e.Operators=e.Operators||{};j=g.Templating=g.Templating||{};k=j.Runtime=j.Runtime||{};l=k.Server=k.Server||{};m=l.TemplateInstance=l.TemplateInstance||{};n=e.Arrays=e.Arrays||{};o=l.ProviderBuilder=l.ProviderBuilder||{};p=g.ListModel=g.ListModel||{};q=e.Unchecked=e.Unchecked||{};r=b.SPA_Templates=b.SPA_Templates||{};s=l.Handler=l.Handler||{};t=g.Var=g.Var||{};u=b.ReactHook=b.ReactHook||{};v=u.React=u.React||{};w=u.HelloWorld=u.HelloWorld||{};x=e.React=e.React||{};y=x.ReactModule=x.ReactModule||{};z=g.View=g.View||{};A=g.ConcreteVar=g.ConcreteVar||{};B=g.Snap=g.Snap||{};C=b.System=b.System||{};D=C.Guid=C.Guid||{};E=e.Collections=e.Collections||{};F=E.List=E.List||{};G=b.StartupCode$SPA$Client=b.StartupCode$SPA$Client||{};H=g.Client=g.Client||{};I=H.Templates=H.Templates||{};J=g.Doc=g.Doc||{};K=e.JavaScript=e.JavaScript||{};L=K.Pervasives=K.Pervasives||{};M=g.AttrProxy=g.AttrProxy||{};N=x.Html=x.Html||{};O=e.Utils=e.Utils||{};P=b.UIBase=b.UIBase||{};Q=P.MyVars=P.MyVars||{};R=b.DatePicker=b.DatePicker||{};S=R.DatePickerLibrary=R.DatePickerLibrary||{};T=S.ReactDatePicker=S.ReactDatePicker||{};U=g.Abbrev=g.Abbrev||{};V=U.Fresh=U.Fresh||{};W=E.Dictionary=E.Dictionary||{};X=b.Object;Y=g.CheckedInput=g.CheckedInput||{};Z=e.Numeric=e.Numeric||{};_0=E.HashSet=E.HashSet||{};_1=e.Seq=e.Seq||{};_2=l.TemplateInitializer=l.TemplateInitializer||{};_3=b.EventTarget;_4=b.Node;_5=K.JS=K.JS||{};_6=g.Attrs=g.Attrs||{};_7=g.DomUtility=g.DomUtility||{};_8=E.DictionaryUtil=E.DictionaryUtil||{};_9=e.Enumerator=e.Enumerator||{};_=_9.T=_9.T||{};$=b.StartupCode$WebSharper_UI$Templates=b.StartupCode$WebSharper_UI$Templates||{};ba=b.WindowOrWorkerGlobalScope;bb=g.Docs=g.Docs||{};bc=e.DateUtil=e.DateUtil||{};bd=b.StartupCode$WebSharper_UI$Abbrev=b.StartupCode$WebSharper_UI$Abbrev||{};be=g.DocElemNode=g.DocElemNode||{};bf=b.CharacterData;bg=g.Storage=g.Storage||{};bh=g.Elt=g.Elt||{};bi=I.Prepare=I.Prepare||{};bj=e.Slice=e.Slice||{};bk=E.KeyCollection=E.KeyCollection||{};bl=g.An=g.An||{};bm=H.Settings=H.Settings||{};bn=U.Mailbox=U.Mailbox||{};bo=g.Array=g.Array||{};bp=H.Attrs=H.Attrs||{};bq=bp.Dyn=bp.Dyn||{};br=bg.ArrayStorage=bg.ArrayStorage||{};bs=g.AttrModule=g.AttrModule||{};bt=e.List=e.List||{};bu=bt.T=bt.T||{};bv=e.Strings=e.Strings||{};bw=g.Updates=g.Updates||{};bx=E.ValueCollection=E.ValueCollection||{};by=H.Docs=H.Docs||{};bz=by.RunState=by.RunState||{};bA=by.NodeSet=by.NodeSet||{};bB=e.Concurrency=e.Concurrency||{};bC=g.Anims=g.Anims||{};bD=b.StartupCode$WebSharper_UI$Doc_Proxy=b.StartupCode$WebSharper_UI$Doc_Proxy||{};bE=e.Queue=e.Queue||{};bF=E.HashSetUtil=E.HashSetUtil||{};bG=g.BindVar=g.BindVar||{};bH=b.StartupCode$WebSharper_UI$DomUtility=b.StartupCode$WebSharper_UI$DomUtility||{};bI=b.StartupCode$WebSharper_UI$Animation=b.StartupCode$WebSharper_UI$Animation||{};bJ=g.AppendList=g.AppendList||{};bK=b.StartupCode$WebSharper_UI$Attr_Client=b.StartupCode$WebSharper_UI$Attr_Client||{};bL=g.DynamicAttrNode=g.DynamicAttrNode||{};bM=bB.Scheduler=bB.Scheduler||{};bN=g.Easing=g.Easing||{};bO=bB.AsyncBody=bB.AsyncBody||{};bP=b.StartupCode$WebSharper_Main$Concurrency=b.StartupCode$WebSharper_Main$Concurrency||{};bQ=bB.CT=bB.CT||{};bR=U.HashSet=U.HashSet||{};bS=g.String=g.String||{};bT=e.CancellationTokenSource=e.CancellationTokenSource||{};bU=by.DomNodes=by.DomNodes||{};bV=e.Char=e.Char||{};bW=b.Error;bX=e.OperationCanceledException=e.OperationCanceledException||{};bY=e.Lazy=e.Lazy||{};bZ=b.StartupCode$WebSharper_UI$AppendList=b.StartupCode$WebSharper_UI$AppendList||{};b0=e.LazyExtensionsProxy=e.LazyExtensionsProxy||{};b1=b0.LazyRecord=b0.LazyRecord||{};b2=b.ReactDOM;b3=b.IntelliFactory;b4=b3&&b3.Runtime;b5=b.React;b6=b.Date;b7=b.console;b8=b.Math;d.Main=function(){var b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch;b9=h.Create$1("");b_=(b$=(ca=(cb=(cc=J.Convert(function(ci){var cj,ck,cl,cm;return(cj=(ck=new o.New$1(),(ck.h.push({$:1,$0:"name",$1:ci}),ck)),(cl=s.CompleteHoles(cj.k,cj.h,[]),(cm=new m.New(cl[1],r.listitem(cl[0])),cj.i=cm,cm))).get_Doc();},d.People().v),(cd=new o.New$1(),(cd.h.push({$:0,$0:"listcontainer",$1:cc}),cd))),(cb.h.push({$:8,$0:"name",$1:b9}),cb)),(ca.h.push(s.EventQ2(ca.k,"add",function(){return ca.i;},function(){d.People().Append(b9.Get());b9.Set("");})),ca)),(ce=s.CompleteHoles(b$.k,b$.h,[["name",0]]),(cf=new m.New(ce[1],r.main(ce[0])),b$.i=cf,cf))).get_Doc();I.LoadLocalTemplates("");J.RunById("main",b_);cg=J.Element("div",[],[J.Element("p",[],[J.TextView((ch=d.count().get_View(),z.Map(function(ci){return function(cj){return ci("You clicked "+b.String(cj)+" times");};}(b.id),ch)))]),J.Element("button",[M.HandlerImpl("click",function(){return function(){var ci;ci=d.count().Get()+1;d.count().Set(ci);return(v.setCount())(ci);};})],[J.TextNode("W# UI Click Me!")]),J.Element("div",[M.OnAfterRenderImpl(function(ci){b2.render(v.FunctionComponent(w.Example,null),ci);})],[])]);I.LoadLocalTemplates("");J.RunById("mainUI",cg);};d.People=function(){G.$cctor();return G.People;};d.count=function(){G.$cctor();return G.count$1;};f=e.Obj=b4.Class({Equals:function(b9){return this===b9;},GetHashCode:function(){return -1;}},null,f);f.New=b4.Ctor(function(){},f);h=g.Var$1=b4.Class({},f,h);h.Create$1=function(b9){return new A.New(false,B.New({$:2,$0:b9,$1:[]}),b9);};i.FailWith=function(b9){throw new bW(b9);};i.KeyValue=function(b9){return[b9.K,b9.V];};m=l.TemplateInstance=b4.Class({get_Doc:function(){return this.doc;}},f,m);m.New=b4.Ctor(function(b9,b_){f.New.call(this);this.doc=b_;this.allVars=b9.$==0?b9.$0:i.FailWith("Should not happen");},m);n.get=function(b9,b_){n.checkBounds(b9,b_);return b9[b_];};n.set=function(b9,b_,b$){n.checkBounds(b9,b_);b9[b_]=b$;};n.checkBounds=function(b9,b_){if(b_<0||b_>=b9.length)i.FailWith("Index was outside the bounds of the array.");};n.length=function(b9){return b9.dims===2?b9.length*b9.length:b9.length;};o=l.ProviderBuilder=b4.Class({},f,o);o.New$1=b4.Ctor(function(){var b9;f.New.call(this);this.i=null;this.k=(b9=D.NewGuid(),b.String(b9));this.h=[];b4.SetOptional(this,"s",null);},o);p=g.ListModel=b4.Class({Append:function(b9){var b_,b$,ca,cb;b_=this;b$=this["var"].Get();ca=this.key(b9);cb=n.tryFindIndex(function(cc){return q.Equals(b_.key(cc),ca);},b$);cb!=null&&cb.$==1?this["var"].Set(this.storage.SSetAt(cb.$0,b9,b$)):this["var"].Set(this.storage.SAppend(b9,b$));this.ObsoleteKey(ca);},ObsoleteKey:function(b9){var b_,b$;b_=(b$=null,[this.it.TryGetValue(b9,{get:function(){return b$;},set:function(ca){b$=ca;}}),b$]);b_[0]?(B.Obsolete(b_[1]),this.it.Remove(b9)):void 0;},GetEnumerator:function(){return _9.Get(this["var"].Get());},GetEnumerator0:function(){return _9.Get0(this["var"].Get());}},f,p);p.New=b4.Ctor(function(b9,b_){p.New$3.call(this,b9,h.Create$1(n.ofSeq(_1.distinctBy(b9,b_.SInit()))),b_);},p);p.New$3=b4.Ctor(function(b9,b_,b$){f.New.call(this);this.key=b9;this["var"]=b_;this.storage=b$;this.v=z.Map(function(ca){return ca.slice();},this["var"].get_View());this.it=new W.New$5();},p);q.Equals=function(b9,b_){var b$,ca,cb,cc;if(b9===b_)return true;else{b$=typeof b9;if(b$=="object"){if(b9===null||b9===void 0||b_===null||b_===void 0)return false;else if("Equals"in b9)return b9.Equals(b_);else if(b9 instanceof b.Array&&b_ instanceof b.Array)return q.arrayEquals(b9,b_);else if(b9 instanceof b.Date&&b_ instanceof b.Date)return q.dateEquals(b9,b_);else{ca=[true];for(var cd in b9)if(function(ce){ca[0]=!b9.hasOwnProperty(ce)||b_.hasOwnProperty(ce)&&q.Equals(b9[ce],b_[ce]);return!ca[0];}(cd))break;if(ca[0]){for(var ce in b_)if(function(cf){ca[0]=!b_.hasOwnProperty(cf)||b9.hasOwnProperty(cf);return!ca[0];}(ce))break;}return ca[0];}}else return b$=="function"&&("$Func"in b9?b9.$Func===b_.$Func&&b9.$Target===b_.$Target:"$Invokes"in b9&&"$Invokes"in b_&&q.arrayEquals(b9.$Invokes,b_.$Invokes));}};q.arrayEquals=function(b9,b_){var b$,ca;if(n.length(b9)===n.length(b_)){b$=true;ca=0;while(b$&&ca<n.length(b9)){!q.Equals(n.get(b9,ca),n.get(b_,ca))?b$=false:void 0;ca=ca+1;}return b$;}else return false;};q.dateEquals=function(b9,b_){return b9.getTime()===b_.getTime();};q.Hash=function(b9){var b_;b_=typeof b9;return b_=="function"?0:b_=="boolean"?b9?1:0:b_=="number"?b9:b_=="string"?q.hashString(b9):b_=="object"?b9==null?0:b9 instanceof b.Array?q.hashArray(b9):q.hashObject(b9):0;};q.hashString=function(b9){var b_,b$,ca;if(b9===null)return 0;else{b_=5381;for(b$=0,ca=b9.length-1;b$<=ca;b$++)b_=q.hashMix(b_,b9[b$].charCodeAt());return b_;}};q.hashArray=function(b9){var b_,b$,ca;b_=-34948909;for(b$=0,ca=n.length(b9)-1;b$<=ca;b$++)b_=q.hashMix(b_,q.Hash(n.get(b9,b$)));return b_;};q.hashObject=function(b9){var b_,b$;if("GetHashCode"in b9)return b9.GetHashCode();else{b_=[0];for(var ca in b9)if(function(cb){b_[0]=q.hashMix(q.hashMix(b_[0],q.hashString(cb)),q.Hash(b9[cb]));return false;}(ca))break;return b_[0];}};q.hashMix=function(b9,b_){return(b9<<5)+b9+b_;};q.Compare=function(b9,b_){var b$,ca,cb,cc,cd,ce;if(b9===b_)return 0;else{ca=typeof b9;switch(ca=="function"?1:ca=="boolean"?2:ca=="number"?2:ca=="string"?2:ca=="object"?3:0){case 0:return typeof b_=="undefined"?0:-1;case 1:return i.FailWith("Cannot compare function values.");case 2:return b9<b_?-1:1;case 3:if(b9===null)cb=-1;else if(b_===null)cb=1;else if("CompareTo"in b9)cb=b9.CompareTo(b_);else if("CompareTo0"in b9)cb=b9.CompareTo0(b_);else if(b9 instanceof b.Array&&b_ instanceof b.Array)cb=q.compareArrays(b9,b_);else if(b9 instanceof b.Date&&b_ instanceof b.Date)cb=q.compareDates(b9,b_);else{cc=[0];for(var cf in b9)if(function(cg){return!b9.hasOwnProperty(cg)?false:!b_.hasOwnProperty(cg)?(cc[0]=1,true):(cc[0]=q.Compare(b9[cg],b_[cg]),cc[0]!==0);}(cf))break;if(cc[0]===0){for(var cg in b_)if(function(ch){return!b_.hasOwnProperty(ch)?false:!b9.hasOwnProperty(ch)&&(cc[0]=-1,true);}(cg))break;}cb=cc[0];}return cb;}}};q.compareArrays=function(b9,b_){var b$,ca;if(n.length(b9)<n.length(b_))return -1;else if(n.length(b9)>n.length(b_))return 1;else{b$=0;ca=0;while(b$===0&&ca<n.length(b9)){b$=q.Compare(n.get(b9,ca),n.get(b_,ca));ca=ca+1;}return b$;}};q.compareDates=function(b9,b_){return q.Compare(b9.getTime(),b_.getTime());};r.listitem=function(b9){I.LoadLocalTemplates("index");return b9?I.NamedTemplate("index",{$:1,$0:"listitem"},b9):void 0;};r.main=function(b9){I.LoadLocalTemplates("index");return b9?I.NamedTemplate("index",{$:1,$0:"main"},b9):void 0;};s.EventQ2=function(b9,b_,b$,ca){return{$:5,$0:b_,$1:function(cb){return function(cc){return ca({Vars:b$(),Target:cb,Event:cc});};}};};s.CompleteHoles=function(b9,b_,b$){var cb,cc,cd,ce,cf;function ca(cg,ch){var ci;return cc.Contains(cg)?null:(ci=ch===0?_2.GetOrAddHoleFor(b9,cg,function(){return{$:8,$0:cg,$1:h.Create$1("")};}):ch===1?_2.GetOrAddHoleFor(b9,cg,function(){return{$:13,$0:cg,$1:h.Create$1(0)};}):ch===2?_2.GetOrAddHoleFor(b9,cg,function(){return{$:9,$0:cg,$1:h.Create$1(false)};}):i.FailWith("Invalid value type"),(cb.set_Item(cg,ci),{$:1,$0:ci}));}cb=new W.New$5();cc=new _0.New$3();cd=_9.Get(b_);try{while(cd.MoveNext()){ce=cd.Current();cf=ce.$0;cc.Add(cf);cb.set_Item(cf,ce);}}finally{if(typeof cd=="object"&&"Dispose"in cd)cd.Dispose();}return[_1.append(b_,n.choose(function(cg){return ca(cg[0],cg[1]);},b$)),{$:0,$0:cb}];};t=g.Var=b4.Class({},f,t);t.New=b4.Ctor(function(){f.New.call(this);},t);v.setCount=function(){G.$cctor();return G.setCount;};v.FunctionComponent=function(b9,b_){return b5.createElement(b9,b_);};v.set_setCount=function(b9){G.$cctor();G.setCount=b9;};w.Example=function(){var b9,b_,b$,ca,cb,cc,cd;b9=b5.useState(0);b_=b9[1];b$=b9[0];ca=b5.useState(new b.Date((cb=b6.now(),bc.DatePortion(cb))));cc=ca[0];cd=b5.createElement((new T.New(),a),{selected:cc,onChange:ca[1]});v.set_setCount(b_);return b5.createElement("div",null,cd,b5.createElement("p",null,(N.textf(function(ce){return function(cf){return ce("You selected "+O.toSafe(cf)+" date");};}))(cc.toDateString())),b5.createElement("p",null,(N.textf(function(ce){return function(cf){return ce("You clicked "+b.String(cf)+" times");};}))(b$)),b5.createElement("button",{onClick:function(){b_(b$+1);Q.count().Set(b$+1);}},"W# React Click me"));};y.elt=function(b9,b_,b$){return b5.createElement(b9,b_,y.inlineArrayOfSeq(b$));};y.inlineArrayOfSeq=function(b9){return b9 instanceof b.Array?b9:n.ofSeq(b9);};z.Map=function(b9,b_){return z.CreateLazy(function(){return B.Map(b9,b_());});};z.CreateLazy=function(b9){var b_;b_={c:null,o:b9};return function(){var b$,ca;b$=b_.c;return b$===null?(b$=b_.o(),b_.c=b$,(ca=b$.s,ca!=null&&ca.$==0)?b_.o=null:B.WhenObsoleteRun(b$,function(){b_.c=null;}),b$):b$;};};z.Const=function(b9){var b_;b_=B.New({$:0,$0:b9});return function(){return b_;};};z.MapSeqCached=function(b9,b_){return z.MapSeqCachedBy(b.id,b9,b_);};z.MapSeqCachedBy=function(b9,b_,b$){var ca;ca=[new W.New$5()];return z.Map(function(cb){var cc,cd,ce;cc=ca[0];cd=new W.New$5();ce=bo.mapInPlace(function(cf){var cg,ch;cg=b9(cf);ch=cc.ContainsKey(cg)?cc.get_Item(cg):b_(cf);cd.set_Item(cg,ch);return ch;},n.ofSeq(cb));ca[0]=cd;return ce;},b$);};z.Sink=function(b9,b_){function b$(){B.WhenRun(b_(),b9,function(){bB.scheduler().Fork(b$);});}bB.scheduler().Fork(b$);};z.Bind=function(b9,b_){return z.Join(z.Map(b9,b_));};z.Map3=function(b9,b_,b$,ca){return z.CreateLazy(function(){return B.Map3(b9,b_(),b$(),ca());});};z.Sequence=function(b9){return z.CreateLazy(function(){return B.Sequence(_1.map(function(b_){return b_();},b9));});};z.Map2=function(b9,b_,b$){return z.CreateLazy(function(){return B.Map2(b9,b_(),b$());});};z.Map2Unit=function(b9,b_){return z.CreateLazy(function(){return B.Map2Unit(b9(),b_());});};z.Join=function(b9){return z.CreateLazy(function(){return B.Join(b9());});};A=g.ConcreteVar=b4.Class({Set:function(b9){if(this.isConst)(function(b_){return b_("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(b_){b7.log(b_);}));else{B.Obsolete(this.snap);this.current=b9;this.snap=B.New({$:2,$0:b9,$1:[]});}},get_View:function(){return this.view;},Get:function(){return this.current;},UpdateMaybe:function(b9){var b_;b_=b9(this.Get());b_!=null&&b_.$==1?this.Set(b_.$0):void 0;}},t,A);A.New=b4.Ctor(function(b9,b_,b$){var ca;ca=this;t.New.call(this);this.isConst=b9;this.current=b$;this.snap=b_;this.view=function(){return ca.snap;};this.id=V.Int();},A);B.Map=function(b9,b_){var b$,ca;b$=b_.s;return b$!=null&&b$.$==0?B.New({$:0,$0:b9(b$.$0)}):(ca=B.New({$:3,$0:[],$1:[]}),(B.When(b_,function(cb){B.MarkDone(ca,b_,b9(cb));},ca),ca));};B.WhenObsoleteRun=function(b9,b_){var b$;b$=b9.s;b$==null?b_():b$!=null&&b$.$==2?b$.$1.push(b_):b$!=null&&b$.$==3?b$.$1.push(b_):void 0;};B.When=function(b9,b_,b$){var ca;ca=b9.s;ca==null?B.Obsolete(b$):ca!=null&&ca.$==2?(B.EnqueueSafe(ca.$1,b$),b_(ca.$0)):ca!=null&&ca.$==3?(ca.$0.push(b_),B.EnqueueSafe(ca.$1,b$)):b_(ca.$0);};B.MarkDone=function(b9,b_,b$){var ca;if(ca=b_.s,ca!=null&&ca.$==0)B.MarkForever(b9,b$);else B.MarkReady(b9,b$);};B.EnqueueSafe=function(b9,b_){var b$,ca,cb,cc;b9.push(b_);if(b9.length%20===0){b$=b9.slice(0);bE.Clear(b9);for(ca=0,cb=n.length(b$)-1;ca<=cb;ca++){cc=n.get(b$,ca);typeof cc=="object"?function(cd){if(cd.s)b9.push(cd);}(cc):function(cd){b9.push(cd);}(cc);}}else void 0;};B.MarkForever=function(b9,b_){var b$,ca,cb,cc;b$=b9.s;if(b$!=null&&b$.$==3){b9.s={$:0,$0:b_};ca=b$.$0;for(cb=0,cc=n.length(ca)-1;cb<=cc;cb++)(n.get(ca,cb))(b_);}else void 0;};B.MarkReady=function(b9,b_){var b$,ca,cb,cc;b$=b9.s;if(b$!=null&&b$.$==3){b9.s={$:2,$0:b_,$1:b$.$1};ca=b$.$0;for(cb=0,cc=n.length(ca)-1;cb<=cc;cb++)(n.get(ca,cb))(b_);}else void 0;};B.WhenRun=function(b9,b_,b$){var ca;ca=b9.s;ca==null?b$():ca!=null&&ca.$==2?(ca.$1.push(b$),b_(ca.$0)):ca!=null&&ca.$==3?(ca.$0.push(b_),ca.$1.push(b$)):b_(ca.$0);};B.Map3=function(b9,b_,b$,ca){var cb,cc,cd,ce;function cf(cg){var ch,ci,cj,ck;if(!(ch=ce.s,ch!=null&&ch.$==0||ch!=null&&ch.$==2)){ci=B.ValueAndForever(b_);cj=B.ValueAndForever(b$);ck=B.ValueAndForever(ca);ci!=null&&ci.$==1?cj!=null&&cj.$==1?ck!=null&&ck.$==1?ci.$0[1]&&cj.$0[1]&&ck.$0[1]?B.MarkForever(ce,b9(ci.$0[0],cj.$0[0],ck.$0[0])):B.MarkReady(ce,b9(ci.$0[0],cj.$0[0],ck.$0[0])):void 0:void 0:void 0;}}cb=b_.s;cc=b$.s;cd=ca.s;return cb!=null&&cb.$==0?cc!=null&&cc.$==0?cd!=null&&cd.$==0?B.New({$:0,$0:b9(cb.$0,cc.$0,cd.$0)}):B.Map3Opt1(b9,cb.$0,cc.$0,ca):cd!=null&&cd.$==0?B.Map3Opt2(b9,cb.$0,cd.$0,b$):B.Map3Opt3(b9,cb.$0,b$,ca):cc!=null&&cc.$==0?cd!=null&&cd.$==0?B.Map3Opt4(b9,cc.$0,cd.$0,b_):B.Map3Opt5(b9,cc.$0,b_,ca):cd!=null&&cd.$==0?B.Map3Opt6(b9,cd.$0,b_,b$):(ce=B.New({$:3,$0:[],$1:[]}),(B.When(b_,cf,ce),B.When(b$,cf,ce),B.When(ca,cf,ce),ce));};B.Sequence=function(b9){var b_,b$,ca;function cb(cc){var cd;if(ca[0]===0){cd=n.map(function(ce){var cf;cf=ce.s;return cf!=null&&cf.$==0?cf.$0:cf!=null&&cf.$==2?cf.$0:i.FailWith("value not found by View.Sequence");},b_);n.forall(function(ce){var cf;cf=ce.s;return cf!=null&&cf.$==0;},b_)?B.MarkForever(b$,cd):B.MarkReady(b$,cd);}else ca[0]--;}b_=n.ofSeq(b9);return b_.length==0?B.New({$:0,$0:[]}):(b$=B.New({$:3,$0:[],$1:[]}),(ca=[n.length(b_)-1],(n.iter(function(cc){B.When(cc,cb,b$);},b_),b$)));};B.Map2=function(b9,b_,b$){var ca,cb,cc;function cd(ce){var cf,cg,ch;if(!(cf=cc.s,cf!=null&&cf.$==0||cf!=null&&cf.$==2)){cg=B.ValueAndForever(b_);ch=B.ValueAndForever(b$);cg!=null&&cg.$==1?ch!=null&&ch.$==1?cg.$0[1]&&ch.$0[1]?B.MarkForever(cc,b9(cg.$0[0],ch.$0[0])):B.MarkReady(cc,b9(cg.$0[0],ch.$0[0])):void 0:void 0;}}ca=b_.s;cb=b$.s;return ca!=null&&ca.$==0?cb!=null&&cb.$==0?B.New({$:0,$0:b9(ca.$0,cb.$0)}):B.Map2Opt1(b9,ca.$0,b$):cb!=null&&cb.$==0?B.Map2Opt2(b9,cb.$0,b_):(cc=B.New({$:3,$0:[],$1:[]}),(B.When(b_,cd,cc),B.When(b$,cd,cc),cc));};B.Map2Unit=function(b9,b_){var b$,ca,cb;function cc(){var cd,ce,cf;if(!(cd=cb.s,cd!=null&&cd.$==0||cd!=null&&cd.$==2)){ce=B.ValueAndForever(b9);cf=B.ValueAndForever(b_);ce!=null&&ce.$==1?cf!=null&&cf.$==1?ce.$0[1]&&cf.$0[1]?B.MarkForever(cb,null):B.MarkReady(cb,null):void 0:void 0;}}b$=b9.s;ca=b_.s;return b$!=null&&b$.$==0?ca!=null&&ca.$==0?B.New({$:0,$0:null}):b_:ca!=null&&ca.$==0?b9:(cb=B.New({$:3,$0:[],$1:[]}),(B.When(b9,cc,cb),B.When(b_,cc,cb),cb));};B.Copy=function(b9){var b_,b$,ca;b_=b9.s;return b_==null?b9:b_!=null&&b_.$==2?(b$=B.New({$:2,$0:b_.$0,$1:[]}),(B.WhenObsolete(b9,b$),b$)):b_!=null&&b_.$==3?(ca=B.New({$:3,$0:[],$1:[]}),(B.When(b9,function(cb){B.MarkDone(ca,b9,cb);},ca),ca)):b9;};B.Join=function(b9){var b_;b_=B.New({$:3,$0:[],$1:[]});B.When(b9,function(b$){var ca;ca=b$();B.When(ca,function(cb){var cc,cd;if((cc=ca.s,cc!=null&&cc.$==0)&&(cd=b9.s,cd!=null&&cd.$==0))B.MarkForever(b_,cb);else B.MarkReady(b_,cb);},b_);},b_);return b_;};B.Map3Opt1=function(b9,b_,b$,ca){return B.Map(function(cb){return b9(b_,b$,cb);},ca);};B.Map3Opt2=function(b9,b_,b$,ca){return B.Map(function(cb){return b9(b_,cb,b$);},ca);};B.Map3Opt3=function(b9,b_,b$,ca){return B.Map2(function(cb,cc){return b9(b_,cb,cc);},b$,ca);};B.Map3Opt4=function(b9,b_,b$,ca){return B.Map(function(cb){return b9(cb,b_,b$);},ca);};B.Map3Opt5=function(b9,b_,b$,ca){return B.Map2(function(cb,cc){return b9(cb,b_,cc);},b$,ca);};B.Map3Opt6=function(b9,b_,b$,ca){return B.Map2(function(cb,cc){return b9(cb,cc,b_);},b$,ca);};B.ValueAndForever=function(b9){var b_;b_=b9.s;return b_!=null&&b_.$==0?{$:1,$0:[b_.$0,true]}:b_!=null&&b_.$==2?{$:1,$0:[b_.$0,false]}:null;};B.Map2Opt1=function(b9,b_,b$){return B.Map(function(ca){return b9(b_,ca);},b$);};B.Map2Opt2=function(b9,b_,b$){return B.Map(function(ca){return b9(ca,b_);},b$);};B.WhenObsolete=function(b9,b_){var b$;b$=b9.s;b$==null?B.Obsolete(b_):b$!=null&&b$.$==2?B.EnqueueSafe(b$.$1,b_):b$!=null&&b$.$==3?B.EnqueueSafe(b$.$1,b_):void 0;};D.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new b.RegExp("[xy]","g"),function(b9){var b_,b$;b_=b8.random()*16|0;b$=b9=="x"?b_:b_&3|8;return b$.toString(16);});};F=E.List=b4.Class({GetEnumerator:function(){return _9.Get(this);},GetEnumerator0:function(){return _9.Get0(this);}},null,F);G.$cctor=function(){G.$cctor=b.ignore;G.count=h.Create$1(0);G.setCount=b.ignore;G.People=p.FromSeq(["John","Paul"]);G.count$1=Q.count();};I.LoadLocalTemplates=function(b9){!I.LocalTemplatesLoaded()?(I.set_LocalTemplatesLoaded(true),I.LoadNestedTemplates(self.document.body,"")):void 0;I.LoadedTemplates().set_Item(b9,I.LoadedTemplateFile(""));};I.NamedTemplate=function(b9,b_,b$){var ca,cb;ca=(cb=null,[I.LoadedTemplateFile(b9).TryGetValue(b_==null?"":b_.$0,{get:function(){return cb;},set:function(cc){cb=cc;}}),cb]);return ca[0]?I.ChildrenTemplate(ca[1].cloneNode(true),b$):(b7.warn("Local template doesn't exist",b_),J.get_Empty());};I.LocalTemplatesLoaded=function(){$.$cctor();return $.LocalTemplatesLoaded;};I.set_LocalTemplatesLoaded=function(b9){$.$cctor();$.LocalTemplatesLoaded=b9;};I.LoadNestedTemplates=function(b9,b_){var ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm;function b$(cn){var co,cp;if(!ca.ContainsKey(cn)){co=(cp=null,[cb.TryGetValue(cn,{get:function(){return cp;},set:function(cq){cp=cq;}}),cp]);co[0]?(cm.Add(cn),cb.Remove(cn),I.PrepareTemplateStrict(b_,{$:1,$0:cn},co[1],{$:1,$0:b$})):b7.warn(cm.Contains(cn)?"Encountered loop when instantiating "+cn:"Local template does not exist: "+cn);}}ca=I.LoadedTemplateFile(b_);cb=new W.New$5();cc=b9.querySelectorAll("[ws-template]");for(cd=0,ce=cc.length-1;cd<=ce;cd++){cf=cc[cd];cg=cf.getAttribute("ws-template").toLowerCase();cf.removeAttribute("ws-template");cb.set_Item(cg,I.FakeRootSingle(cf));}ch=b9.querySelectorAll("[ws-children-template]");for(ci=0,cj=ch.length-1;ci<=cj;ci++){ck=ch[ci];cl=ck.getAttribute("ws-children-template").toLowerCase();ck.removeAttribute("ws-children-template");cb.set_Item(cl,I.FakeRoot(ck));}cm=new _0.New$3();while(cb.count>0)b$(_1.head(cb.get_Keys()));};I.LoadedTemplates=function(){$.$cctor();return $.LoadedTemplates;};I.LoadedTemplateFile=function(b9){var b_,b$,ca;b_=(b$=null,[I.LoadedTemplates().TryGetValue(b9,{get:function(){return b$;},set:function(cb){b$=cb;}}),b$]);return b_[0]?b_[1]:(ca=new W.New$5(),(I.LoadedTemplates().set_Item(b9,ca),ca));};I.ChildrenTemplate=function(b9,b_){var b$,ca,cb,cc,cd;b$=I.InlineTemplate(b9,_1.append(b_,I.GlobalHoles().get_Values()));ca=b$[1];cb=b$[0];cc=cb.Els;return!q.Equals(cc,null)&&cc.length===1&&(n.get(cc,0)instanceof _4&&(q.Equals(n.get(cc,0).nodeType,_4.ELEMENT_NODE)&&(cd=n.get(cc,0),true)))?bh.TreeNode(cb,ca):J.Mk({$:6,$0:cb},ca);};I.FakeRootSingle=function(b9){var b_,b$,ca,cb;b9.removeAttribute("ws-template");b_=b9.getAttribute("ws-replace");b_===null?void 0:(b9.removeAttribute("ws-replace"),b$=b9.parentNode,q.Equals(b$,null)?void 0:(ca=self.document.createElement(b9.tagName),ca.setAttribute("ws-replace",b_),b$.replaceChild(ca,b9)));cb=self.document.createElement("div");cb.appendChild(b9);return cb;};I.FakeRoot=function(b9){var b_;b_=self.document.createElement("div");while(b9.hasChildNodes())b_.appendChild(b9.firstChild);return b_;};I.PrepareTemplateStrict=function(b9,b_,b$,ca){var cb;function cc(ch,ci){var cj,ck,cl,cm,cn,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ;function co(cK){}while(true)switch(ch){case 0:if(ci!==null){cj=ci.nextSibling;if(q.Equals(ci.nodeType,_4.TEXT_NODE))bi.convertTextNode(ci);else if(q.Equals(ci.nodeType,_4.ELEMENT_NODE))ce(ci);ci=cj;}else return null;break;case 1:cp=bj.string(ci.nodeName,{$:1,$0:3},null).toLowerCase();cq=(ck=cp.indexOf("."),ck===-1?[b9,cp]:[bj.string(cp,null,{$:1,$0:ck-1}),bj.string(cp,{$:1,$0:ck+1},null)]);cr=cq[1];cs=cq[0];if(cs!==""&&!I.LoadedTemplates().ContainsKey(cs))return bi.failNotLoaded(cr);else{if(cs===""&&ca!=null)ca.$0(cr);ct=I.LoadedTemplates().get_Item(cs);if(!ct.ContainsKey(cr))return bi.failNotLoaded(cr);else{cu=ct.get_Item(cr);cv=cu.cloneNode(true);cw=new _0.New$3();cx=new W.New$5();cy=ci.attributes;for(cz=0,cA=cy.length-1;cz<=cA;cz++){cB=cy.item(cz).name.toLowerCase();cx.set_Item(cB,(cC=cy.item(cz).nodeValue,cC===""?cB:cC.toLowerCase()));!cw.Add(cB)?b7.warn("Hole mapped twice",cB):void 0;}for(cD=0,cE=ci.childNodes.length-1;cD<=cE;cD++){cF=ci.childNodes[cD];q.Equals(cF.nodeType,_4.ELEMENT_NODE)?!cw.Add(cF.nodeName.toLowerCase())?b7.warn("Hole filled twice",cr):void 0:void 0;}cG=ci.childNodes.length===1&&q.Equals(ci.firstChild.nodeType,_4.TEXT_NODE);if(cG){cm=bi.fillTextHole(cv,ci.firstChild.textContent,cr);((function(cK){return function(cL){if(cL!=null)cK(cL.$0);};}((cn=function(cK){return function(cL){return cK.Add(cL);};}(cw),function(cK){return co(cn(cK));})))(cm));}bi.removeHolesExcept(cv,cw);if(!cG){for(cH=0,cI=ci.childNodes.length-1;cH<=cI;cH++){cJ=ci.childNodes[cH];q.Equals(cJ.nodeType,_4.ELEMENT_NODE)?cJ.hasAttributes()?bi.fillInstanceAttrs(cv,cJ):cd(cv,cJ):void 0;}}bi.mapHoles(cv,cx);bi.fill(cv,ci.parentNode,ci);ci.parentNode.removeChild(ci);return;}}break;}}function cd(ch,ci){var cj,cl,cm;function ck(cn,co){var cp;if(cl==="title"&&ci.hasChildNodes()){cp=_7.ParseHTMLIntoFakeRoot(ci.textContent);ci.removeChild(ci.firstChild);while(cp.hasChildNodes())ci.appendChild(cp.firstChild);}else null;ce(ci);return bi.fill(ci,cn,co);}cl=ci.nodeName.toLowerCase();I.foreachNotPreserved(ch,"[ws-attr-holes]",function(cn){var co,cp,cq,cr,cs;co=bv.SplitChars(cn.getAttribute("ws-attr-holes"),[" "],1);for(cp=0,cq=co.length-1;cp<=cq;cp++){cr=n.get(co,cp);cn.setAttribute(cr,(cs=new b.RegExp("\\${"+cl+"}","ig"),cn.getAttribute(cr).replace(cs,ci.textContent)));}});cm=ch.querySelector("[ws-hole="+cl+"]");if(q.Equals(cm,null)){cj=ch.querySelector("[ws-replace="+cl+"]");return q.Equals(cj,null)?null:(ck(cj.parentNode,cj),void cj.parentNode.removeChild(cj));}else{while(cm.hasChildNodes())cm.removeChild(cm.lastChild);cm.removeAttribute("ws-hole");return ck(cm,null);}}function ce(ch){if(!ch.hasAttribute("ws-preserve"))if(bv.StartsWith(ch.nodeName.toLowerCase(),"ws-"))cg(ch);else{bi.convertAttrs(ch);cf(ch.firstChild);}}function cf(ch){return cc(0,ch);}function cg(ch){return cc(1,ch);}cb=(b_==null?"":b_.$0).toLowerCase();I.LoadedTemplateFile(b9).set_Item(cb,b$);b$.hasChildNodes()?(function(ch){var ci,cj,ck,cl;while(true){ci=ch.querySelector("[ws-template]");if(q.Equals(ci,null)){cj=ch.querySelector("[ws-children-template]");if(q.Equals(cj,null))return null;else{ck=cj.getAttribute("ws-children-template");cj.removeAttribute("ws-children-template");I.PrepareTemplateStrict(b9,{$:1,$0:ck},cj,null);ch=ch;}}else{cl=ci.getAttribute("ws-template");(I.PrepareSingleTemplate(b9,{$:1,$0:cl},ci))(null);ch=ch;}}}(b$),cf(b$.firstChild)):void 0;};I.InlineTemplate=function(b9,b_){var b$,ca,cb,cc,cf,cg,ch,ci,cj,ck,cl;function cd(cm,cn){var co,cp,cq;co=_6.Insert(cm,cn);cg.push(_6.Updates(co));ch.push([cm,co]);cp=b4.GetOptional(co.OnAfterRender);return cp==null?null:(cq=cp.$0,void ci.push(function(){cq(cm);}));}function ce(cm){var cn,co;cn=(co=null,[cj.TryGetValue(cm,{get:function(){return co;},set:function(cp){co=cp;}}),co]);return cn[0]?cn[1].$==0?{$:1,$0:cn[1].$1}:cn[1].$==1?{$:1,$0:J.TextNode(cn[1].$1)}:cn[1].$==2?{$:1,$0:J.TextView(cn[1].$1)}:cn[1].$==8?{$:1,$0:J.TextView(cn[1].$1.get_View())}:cn[1].$==9?{$:1,$0:J.TextView(z.Map(b.String,cn[1].$1.get_View()))}:cn[1].$==10?{$:1,$0:J.TextView(z.Map(function(cp){return cp.get_Input();},cn[1].$1.get_View()))}:cn[1].$==11?{$:1,$0:J.TextView(z.Map(b.String,cn[1].$1.get_View()))}:cn[1].$==12?{$:1,$0:J.TextView(z.Map(function(cp){return cp.get_Input();},cn[1].$1.get_View()))}:cn[1].$==13?{$:1,$0:J.TextView(z.Map(b.String,cn[1].$1.get_View()))}:(b7.warn("Content hole filled with attribute data",cm),null):null;}cf=[];cg=[];ch=[];ci=[];cj=new W.New$5();ck=_9.Get(b_);try{while(ck.MoveNext()){cl=ck.Current();cj.set_Item(cl.$0,cl);}}finally{if(typeof ck=="object"&&"Dispose"in ck)ck.Dispose();}b$=_7.ChildrenArray(b9);I.foreachNotPreserved(b9,"[ws-hole]",function(cm){var cn,co,cp;cp=cm.getAttribute("ws-hole");cm.removeAttribute("ws-hole");while(cm.hasChildNodes())cm.removeChild(cm.lastChild);cn=ce(cp);cn!=null&&cn.$==1?(co=cn.$0,bb.LinkElement(cm,co.docNode),cf.push(be.New(_6.Empty(cm),co.docNode,null,cm,V.Int(),null)),cg.push(co.updates)):void 0;});I.foreachNotPreserved(b9,"[ws-replace]",function(cm){var cn,co,cp,cq,cr,cs;cn=ce(cm.getAttribute("ws-replace"));cn!=null&&cn.$==1?(co=cn.$0,cp=cm.parentNode,cq=self.document.createTextNode(""),cp.replaceChild(cq,cm),cr=bb.InsertBeforeDelim(cq,co.docNode),cs=n.tryFindIndex(function(ct){return cm===ct;},b$),cs==null?void 0:n.set(b$,cs.$0,co.docNode),cf.push(be.New(_6.Empty(cp),co.docNode,{$:1,$0:[cr,cq]},cp,V.Int(),null)),cg.push(co.updates)):void 0;});I.foreachNotPreserved(b9,"[ws-attr]",function(cm){var cn,co,cp;cn=cm.getAttribute("ws-attr");cm.removeAttribute("ws-attr");co=(cp=null,[cj.TryGetValue(cn,{get:function(){return cp;},set:function(cq){cp=cq;}}),cp]);co[0]?co[1].$==3?cd(cm,co[1].$1):b7.warn("Attribute hole filled with non-attribute data",cn):void 0;});I.foreachNotPreserved(b9,"[ws-on]",function(cm){cd(cm,M.Concat(n.choose(function(cn){var co,cp,cq;co=bv.SplitChars(cn,[":"],1);cp=(cq=null,[cj.TryGetValue(n.get(co,1),{get:function(){return cq;},set:function(cr){cq=cr;}}),cq]);return cp[0]?cp[1].$==4?{$:1,$0:bs.Handler(n.get(co,0),cp[1].$1)}:cp[1].$==5?{$:1,$0:M.Handler(n.get(co,0),cp[1].$1)}:(b7.warn("Event hole on"+n.get(co,0)+" filled with non-event data",n.get(co,1)),null):null;},bv.SplitChars(cm.getAttribute("ws-on"),[" "],1))));cm.removeAttribute("ws-on");});I.foreachNotPreserved(b9,"[ws-onafterrender]",function(cm){var cn,co,cp;cn=cm.getAttribute("ws-onafterrender");co=(cp=null,[cj.TryGetValue(cn,{get:function(){return cp;},set:function(cq){cp=cq;}}),cp]);co[0]?co[1].$==6?(cm.removeAttribute("ws-onafterrender"),cd(cm,bs.OnAfterRender(co[1].$1))):co[1].$==7?(cm.removeAttribute("ws-onafterrender"),cd(cm,bs.OnAfterRender(co[1].$1))):b7.warn("onafterrender hole filled with non-onafterrender data",cn):void 0;});I.foreachNotPreserved(b9,"[ws-var]",function(cm){var cn,co,cp;cn=cm.getAttribute("ws-var");cm.removeAttribute("ws-var");co=(cp=null,[cj.TryGetValue(cn,{get:function(){return cp;},set:function(cq){cp=cq;}}),cp]);co[0]?co[1].$==8?cd(cm,bs.Value(co[1].$1)):co[1].$==9?cd(cm,bs.Checked(co[1].$1)):co[1].$==10?cd(cm,bs.IntValue(co[1].$1)):co[1].$==11?cd(cm,bs.IntValueUnchecked(co[1].$1)):co[1].$==12?cd(cm,bs.FloatValue(co[1].$1)):co[1].$==13?cd(cm,bs.FloatValueUnchecked(co[1].$1)):b7.warn("Var hole filled with non-Var data",cn):void 0;});I.foreachNotPreserved(b9,"[ws-attr-holes]",function(cm){var cn,co,cp,cq;cn=new b.RegExp(I.TextHoleRE(),"g");co=bv.SplitChars(cm.getAttribute("ws-attr-holes"),[" "],1);cm.removeAttribute("ws-attr-holes");for(cp=0,cq=co.length-1;cp<=cq;cp++)(function(){var cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD;cA=n.get(co,cp);cB=cm.getAttribute(cA);cr=null;cs=0;cC=[];while(cr=cn.exec(cB),cr!==null){cD=bj.string(cB,{$:1,$0:cs},{$:1,$0:cn.lastIndex-n.get(cr,0).length-1});cs=cn.lastIndex;cC.push([cD,n.get(cr,1)]);}cu=bj.string(cB,{$:1,$0:cs},null);cn.lastIndex=0;cv=n.foldBack(function(cE,cF){return(function(cG){var cH,cI;cH=cG[0];cI=cG[1];return function(cJ){var cK,cL,cM,cN,cO;cK=cJ[0];cL=cJ[1];cM=(cN=(cO=null,[cj.TryGetValue(cI,{get:function(){return cO;},set:function(cP){cO=cP;}}),cO]),cN[0]?cN[1].$==1?{$:0,$0:cN[1].$1}:cN[1].$==2?{$:1,$0:cN[1].$1}:cN[1].$==8?{$:1,$0:cN[1].$1.get_View()}:cN[1].$==9?{$:1,$0:z.Map(b.String,cN[1].$1.get_View())}:cN[1].$==10?{$:1,$0:z.Map(function(cP){return cP.get_Input();},cN[1].$1.get_View())}:cN[1].$==11?{$:1,$0:z.Map(b.String,cN[1].$1.get_View())}:cN[1].$==12?{$:1,$0:z.Map(function(cP){return cP.get_Input();},cN[1].$1.get_View())}:cN[1].$==13?{$:1,$0:z.Map(b.String,cN[1].$1.get_View())}:(b7.warn("Attribute value hole filled with non-text data",cI),{$:0,$0:""}):{$:0,$0:""});return cM.$==1?[cH,new bu({$:1,$0:cK===""?cM.$0:z.Map(function(cP){return cP+cK;},cM.$0),$1:cL})]:[cH+cM.$0+cK,cL];};}(cE))(cF);},cC,[cu,bu.Empty]);return cd(cm,cv[1].$==1?cv[1].$1.$==1?cv[1].$1.$1.$==1?cv[1].$1.$1.$1.$==0?(cw=cv[0],bs.Dynamic(cA,z.Map3(function(cE,cF,cG){return cw+cE+cF+cG;},cv[1].$0,cv[1].$1.$0,cv[1].$1.$1.$0))):(cx=cv[0],bs.Dynamic(cA,z.Map(function(cE){return cx+bv.concat("",cE);},z.Sequence(cv[1])))):(cy=cv[0],bs.Dynamic(cA,z.Map2(function(cE,cF){return cy+cE+cF;},cv[1].$0,cv[1].$1.$0))):cv[0]===""?bs.Dynamic(cA,cv[1].$0):(cz=cv[0],bs.Dynamic(cA,z.Map(function(cE){return cz+cE;},cv[1].$0))):M.Create(cA,cv[0]));}());});return[b4.DeleteEmptyFields({Els:b$,Dirty:true,Holes:cf,Attrs:ch,Render:(ca=ci.length==0?null:{$:1,$0:function(cm){n.iter(function(cn){cn(cm);},ci);}},ca?ca.$0:void 0),El:(cb=!q.Equals(b$,null)&&b$.length===1&&(n.get(b$,0)instanceof _4&&(n.get(b$,0)instanceof b.Element&&(cc=n.get(b$,0),true)))?{$:1,$0:cc}:null,cb?cb.$0:void 0)},["Render","El"]),bo.TreeReduce(z.Const(),z.Map2Unit,cg)];};I.GlobalHoles=function(){$.$cctor();return $.GlobalHoles;};I.foreachNotPreserved=function(b9,b_,b$){_7.IterSelector(b9,b_,function(ca){if(ca.closest("[ws-preserve]")==null)b$(ca);});};I.PrepareSingleTemplate=function(b9,b_,b$){var ca;ca=I.FakeRootSingle(b$);return function(cb){I.PrepareTemplateStrict(b9,b_,ca,cb);};};I.TextHoleRE=function(){$.$cctor();return $.TextHoleRE;};J=g.Doc=b4.Class({},f,J);J.RunById=function(b9,b_){var b$;b$=self.document.getElementById(b9);q.Equals(b$,null)?i.FailWith("invalid id: "+b9):J.Run(b$,b_);};J.TextNode=function(b9){return J.Mk({$:5,$0:self.document.createTextNode(b9)},z.Const());};J.Convert=function(b9,b_){return J.Flatten(z.MapSeqCached(b9,b_));};J.Run=function(b9,b_){bb.LinkElement(b9,b_.docNode);J.RunInPlace(false,b9,b_);};J.Element=function(b9,b_,b$){var ca,cb;ca=M.Concat(b_);cb=J.Concat(b$);return bh.New(self.document.createElement(b9),ca,cb);};J.Mk=function(b9,b_){return new J.New(b9,b_);};J.TextView=function(b9){var b_;b_=bb.CreateTextNode();return J.Mk({$:4,$0:b_},z.Map(function(b$){bb.UpdateTextNode(b_,b$);},b9));};J.Flatten=function(b9){return J.EmbedView(z.Map(J.Concat,b9));};J.get_Empty=function(){return J.Mk(null,z.Const());};J.RunInPlace=function(b9,b_,b$){var ca;ca=bb.CreateRunState(b_,b$.docNode);z.Sink(bl.get_UseAnimations()||bm.BatchUpdatesEnabled()?bn.StartProcessor(bb.PerformAnimatedUpdate(b9,ca,b$.docNode)):function(){bb.PerformSyncUpdate(b9,ca,b$.docNode);},b$.updates);};J.Concat=function(b9){var b_;b_=bo.ofSeqNonCopying(b9);return bo.TreeReduce(J.get_Empty(),J.Append,b_);};J.EmbedView=function(b9){var b_;b_=bb.CreateEmbedNode();return J.Mk({$:2,$0:b_},z.Map(b.ignore,z.Bind(function(b$){bb.UpdateEmbedNode(b_,b$.docNode);return b$.updates;},b9)));};J.Append=function(b9,b_){return J.Mk({$:0,$0:b9.docNode,$1:b_.docNode},z.Map2Unit(b9.updates,b_.updates));};J.New=b4.Ctor(function(b9,b_){f.New.call(this);this.docNode=b9;this.updates=b_;},J);L.NewFromSeq=function(b9){var b_,b$,ca;b_={};b$=_9.Get(b9);try{while(b$.MoveNext()){ca=b$.Current();b_[ca[0]]=ca[1];}}finally{if(typeof b$=="object"&&"Dispose"in b$)b$.Dispose();}return b_;};M=g.AttrProxy=b4.Class({},null,M);M.HandlerImpl=function(b9,b_){return _6.Static(function(b$){b$.addEventListener(b9,function(ca){return(b_(b$))(ca);},false);});};M.OnAfterRenderImpl=function(b9){return new M({$:4,$0:b9});};M.Concat=function(b9){var b_;b_=bo.ofSeqNonCopying(b9);return bo.TreeReduce(_6.EmptyAttr(),M.Append,b_);};M.Append=function(b9,b_){return _6.AppendTree(b9,b_);};M.Handler=function(b9,b_){return M.HandlerImpl(b9,b_);};M.Create=function(b9,b_){return _6.Static(function(b$){b$.setAttribute(b9,b_);});};N.textf=function(b9){return b9(b.id);};O.toSafe=function(b9){return b9==null?"":b9;};Q.count=function(){G.$cctor();return G.count;};T=S.ReactDatePicker=b4.Class({},f,T);T.New=b4.Ctor(function(){f.New.call(this);},T);V.Int=function(){V.set_counter(V.counter()+1);return V.counter();};V.set_counter=function(b9){bd.$cctor();bd.counter=b9;};V.counter=function(){bd.$cctor();return bd.counter;};W=E.Dictionary=b4.Class({set_Item:function(b9,b_){this.set(b9,b_);},set:function(b9,b_){var b$,ca,cb,cc;b$=this;ca=this.hash(b9);cb=this.data[ca];cb==null?(this.count=this.count+1,this.data[ca]=new b.Array({K:b9,V:b_})):(cc=n.tryFindIndex(function(cd){return b$.equals.apply(null,[(i.KeyValue(cd))[0],b9]);},cb),cc==null?(this.count=this.count+1,cb.push({K:b9,V:b_})):cb[cc.$0]={K:b9,V:b_});},TryGetValue:function(b9,b_){var b$,ca,cb;b$=this;ca=this.data[this.hash(b9)];return ca==null?false:(cb=n.tryPick(function(cc){var cd;cd=i.KeyValue(cc);return b$.equals.apply(null,[cd[0],b9])?{$:1,$0:cd[1]}:null;},ca),cb!=null&&cb.$==1&&(b_.set(cb.$0),true));},Remove:function(b9){return this.remove(b9);},ContainsKey:function(b9){var b_,b$;b_=this;b$=this.data[this.hash(b9)];return b$==null?false:n.exists(function(ca){return b_.equals.apply(null,[(i.KeyValue(ca))[0],b9]);},b$);},get_Keys:function(){return new bk.New(this);},get_Values:function(){return new bx.New(this);},remove:function(b9){var b_,b$,ca,cb;b_=this;b$=this.hash(b9);ca=this.data[b$];return ca==null?false:(cb=n.filter(function(cc){return!b_.equals.apply(null,[(i.KeyValue(cc))[0],b9]);},ca),n.length(cb)<ca.length&&(this.count=this.count-1,this.data[b$]=cb,true));},get_Item:function(b9){return this.get(b9);},get:function(b9){var b_,b$;b_=this;b$=this.data[this.hash(b9)];return b$==null?_8.notPresent():n.pick(function(ca){var cb;cb=i.KeyValue(ca);return b_.equals.apply(null,[cb[0],b9])?{$:1,$0:cb[1]}:null;},b$);},GetEnumerator:function(){return _9.Get0(this);},GetEnumerator0:function(){return _9.Get0(n.concat(_5.GetFieldValues(this.data)));}},f,W);W.New$5=b4.Ctor(function(){W.New$6.call(this,[],q.Equals,q.Hash);},W);W.New$6=b4.Ctor(function(b9,b_,b$){var ca,cb;f.New.call(this);this.equals=b_;this.hash=b$;this.count=0;this.data=[];ca=_9.Get(b9);try{while(ca.MoveNext()){cb=ca.Current();this.set(cb.K,cb.V);}}finally{if(typeof ca=="object"&&"Dispose"in ca)ca.Dispose();}},W);z=g.View=b4.Class({},null,z);B.Obsolete=function(b9){var b_,b$,ca,cb,cc;b$=b9.s;if(b$==null||(b$!=null&&b$.$==2?(b_=b$.$1,false):b$!=null&&b$.$==3?(b_=b$.$1,false):true))void 0;else{b9.s=null;for(ca=0,cb=n.length(b_)-1;ca<=cb;ca++){cc=n.get(b_,ca);typeof cc=="object"?function(cd){B.Obsolete(cd);}(cc):cc();}}};B.New=function(b9){return{s:b9};};p.FromSeq=function(b9){return p.Create(b.id,b9);};p.Create=function(b9,b_){return p.CreateWithStorage(b9,bg.InMemory(n.ofSeq(b_)));};p.CreateWithStorage=function(b9,b_){return new p.New(b9,b_);};Y=g.CheckedInput=b4.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,Y);Z.TryParseInt32=function(b9,b_){return Z.TryParse(b9,-2147483648,2147483647,b_);};_0=E.HashSet=b4.Class({Add:function(b9){return this.add(b9);},Contains:function(b9){var b_;b_=this.data[this.hash(b9)];return b_==null?false:this.arrContains(b9,b_);},add:function(b9){var b_,b$;b_=this.hash(b9);b$=this.data[b_];return b$==null?(this.data[b_]=[b9],this.count=this.count+1,true):this.arrContains(b9,b$)?false:(b$.push(b9),this.count=this.count+1,true);},arrContains:function(b9,b_){var b$,ca,cb,cc;b$=true;ca=0;cc=b_.length;while(b$&&ca<cc)if(this.equals.apply(null,[b_[ca],b9]))b$=false;else ca=ca+1;return!b$;},ExceptWith:function(b9){var b_;b_=_9.Get(b9);try{while(b_.MoveNext())this.Remove(b_.Current());}finally{if(typeof b_=="object"&&"Dispose"in b_)b_.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(b9){var b_,b$,ca,cb;b_=0;b$=bF.concat(this.data);for(ca=0,cb=b$.length-1;ca<=cb;ca++)n.set(b9,ca,b$[ca]);},IntersectWith:function(b9){var b_,b$,ca,cb,cc;b_=new _0.New$4(b9,this.equals,this.hash);b$=bF.concat(this.data);for(ca=0,cb=b$.length-1;ca<=cb;ca++){cc=b$[ca];!b_.Contains(cc)?this.Remove(cc):void 0;}},Remove:function(b9){var b_;b_=this.data[this.hash(b9)];return b_==null?false:this.arrRemove(b9,b_)&&(this.count=this.count-1,true);},arrRemove:function(b9,b_){var b$,ca,cb,cc;b$=true;ca=0;cc=b_.length;while(b$&&ca<cc)if(this.equals.apply(null,[b_[ca],b9])){b_.splice.apply(b_,[ca,1]);b$=false;}else ca=ca+1;return!b$;},GetEnumerator:function(){return _9.Get(bF.concat(this.data));},GetEnumerator0:function(){return _9.Get(bF.concat(this.data));}},f,_0);_0.New$3=b4.Ctor(function(){_0.New$4.call(this,[],q.Equals,q.Hash);},_0);_0.New$4=b4.Ctor(function(b9,b_,b$){var ca;f.New.call(this);this.equals=b_;this.hash=b$;this.data=[];this.count=0;ca=_9.Get(b9);try{while(ca.MoveNext())this.add(ca.Current());}finally{if(typeof ca=="object"&&"Dispose"in ca)ca.Dispose();}},_0);_0.New$2=b4.Ctor(function(b9){_0.New$4.call(this,b9,q.Equals,q.Hash);},_0);_1.append=function(b9,b_){return{GetEnumerator:function(){var b$,ca;b$=_9.Get(b9);ca=[true];return new _.New(b$,null,function(cb){var cc;return cb.s.MoveNext()?(cb.c=cb.s.Current(),true):(cc=cb.s,!q.Equals(cc,null)?cc.Dispose():void 0,cb.s=null,ca[0]&&(ca[0]=false,cb.s=_9.Get(b_),cb.s.MoveNext()?(cb.c=cb.s.Current(),true):(cb.s.Dispose(),cb.s=null,false)));},function(cb){var cc;cc=cb.s;!q.Equals(cc,null)?cc.Dispose():void 0;});}};};_1.head=function(b9){var b_;b_=_9.Get(b9);try{return b_.MoveNext()?b_.Current():_1.insufficient();}finally{if(typeof b_=="object"&&"Dispose"in b_)b_.Dispose();}};_1.fold=function(b9,b_,b$){var ca,cb;ca=b_;cb=_9.Get(b$);try{while(cb.MoveNext())ca=b9(ca,cb.Current());return ca;}finally{if(typeof cb=="object"&&"Dispose"in cb)cb.Dispose();}};_1.distinctBy=function(b9,b_){return{GetEnumerator:function(){var b$,ca;b$=_9.Get(b_);ca=new _0.New$3();return new _.New(null,null,function(cb){var cc,cd;if(b$.MoveNext()){cc=b$.Current();cd=ca.Add(b9(cc));while(!cd&&b$.MoveNext()){cc=b$.Current();cd=ca.Add(b9(cc));}return cd&&(cb.c=cc,true);}else return false;},function(){b$.Dispose();});}};};_1.iter=function(b9,b_){var b$;b$=_9.Get(b_);try{while(b$.MoveNext())b9(b$.Current());}finally{if(typeof b$=="object"&&"Dispose"in b$)b$.Dispose();}};_1.map=function(b9,b_){return{GetEnumerator:function(){var b$;b$=_9.Get(b_);return new _.New(null,null,function(ca){return b$.MoveNext()&&(ca.c=b9(b$.Current()),true);},function(){b$.Dispose();});}};};_1.max=function(b9){var b_,b$,ca;b_=_9.Get(b9);try{if(!b_.MoveNext())_1.seqEmpty();b$=b_.Current();while(b_.MoveNext()){ca=b_.Current();q.Compare(ca,b$)===1?b$=ca:void 0;}return b$;}finally{if(typeof b_=="object"&&"Dispose"in b_)b_.Dispose();}};_1.seqEmpty=function(){return i.FailWith("The input sequence was empty.");};_1.forall=function(b9,b_){return!_1.exists(function(b$){return!b9(b$);},b_);};_1.exists=function(b9,b_){var b$,ca;b$=_9.Get(b_);try{ca=false;while(!ca&&b$.MoveNext())ca=b9(b$.Current());return ca;}finally{if(typeof b$=="object"&&"Dispose"in b$)b$.Dispose();}};n.choose=function(b9,b_){var b$,ca,cb,cc;b$=[];for(ca=0,cb=b_.length-1;ca<=cb;ca++){cc=b9(b_[ca]);cc==null?void 0:b$.push(cc.$0);}return b$;};n.tryFindIndex=function(b9,b_){var b$,ca;b$=null;ca=0;while(ca<b_.length&&b$==null){b9(b_[ca])?b$={$:1,$0:ca}:void 0;ca=ca+1;}return b$;};n.tryPick=function(b9,b_){var b$,ca,cb;b$=null;ca=0;while(ca<b_.length&&b$==null){cb=b9(b_[ca]);cb!=null&&cb.$==1?b$=cb:void 0;ca=ca+1;}return b$;};n.exists=function(b9,b_){var b$,ca,cb,cc;b$=false;ca=0;cc=n.length(b_);while(!b$&&ca<cc)if(b9(b_[ca]))b$=true;else ca=ca+1;return b$;};n.ofSeq=function(b9){var b_,b$;if(b9 instanceof b.Array)return b9.slice();else if(b9 instanceof bu)return n.ofList(b9);else{b_=[];b$=_9.Get(b9);try{while(b$.MoveNext())b_.push(b$.Current());return b_;}finally{if(typeof b$=="object"&&"Dispose"in b$)b$.Dispose();}}};n.concat=function(b9){return b.Array.prototype.concat.apply([],n.ofSeq(b9));};n.foldBack=function(b9,b_,b$){var ca,cb,cc,cd,ce;ca=b$;cc=b_.length;for(cd=1,ce=cc;cd<=ce;cd++)ca=b9(b_[cc-cd],ca);return ca;};n.iter=function(b9,b_){var b$,ca;for(b$=0,ca=b_.length-1;b$<=ca;b$++)b9(b_[b$]);};n.map=function(b9,b_){var b$,ca,cb;b$=new b.Array(b_.length);for(ca=0,cb=b_.length-1;ca<=cb;ca++)b$[ca]=b9(b_[ca]);return b$;};n.filter=function(b9,b_){var b$,ca,cb;b$=[];for(ca=0,cb=b_.length-1;ca<=cb;ca++)if(b9(b_[ca]))b$.push(b_[ca]);return b$;};n.ofList=function(b9){var b_,b$;b$=[];b_=b9;while(!(b_.$==0)){b$.push(bt.head(b_));b_=bt.tail(b_);}return b$;};n.pick=function(b9,b_){var b$;b$=n.tryPick(b9,b_);return b$==null?i.FailWith("KeyNotFoundException"):b$.$0;};n.forall=function(b9,b_){var b$,ca,cb,cc;b$=true;ca=0;cc=n.length(b_);while(b$&&ca<cc)if(b9(b_[ca]))ca=ca+1;else b$=false;return b$;};n.create=function(b9,b_){var b$,ca,cb;b$=new b.Array(b9);for(ca=0,cb=b9-1;ca<=cb;ca++)b$[ca]=b_;return b$;};n.init=function(b9,b_){var b$,ca,cb;b9<0?i.FailWith("Negative size given."):null;b$=new b.Array(b9);for(ca=0,cb=b9-1;ca<=cb;ca++)b$[ca]=b_(ca);return b$;};_2.$cctor=function(){_2.$cctor=b.ignore;_2.initialized=new W.New$5();};_2=l.TemplateInitializer=b4.Class({},f,_2);_2.GetOrAddHoleFor=function(b9,b_,b$){var ca,cb,cc,cd;_2.$cctor();ca=_2.GetHolesFor(b9);cb=(cc=null,[ca.TryGetValue(b_,{get:function(){return cc;},set:function(ce){cc=ce;}}),cc]);return cb[0]?cb[1]:(cd=b$(),(ca.set_Item(b_,cd),cd));};_2.GetHolesFor=function(b9){var b_,b$,ca;_2.$cctor();b_=(b$=null,[_2.initialized.TryGetValue(b9,{get:function(){return b$;},set:function(cb){b$=cb;}}),b$]);return b_[0]?b_[1]:(ca=new W.New$5(),(_2.initialized.set_Item(b9,ca),ca));};_5.GetFieldValues=function(b9){var b_,b$;b_=[];for(var ca in b9)b_.push(b9[ca]);return b_;};_6.Static=function(b9){return new M({$:3,$0:b9});};_6.Insert=function(b9,b_){var b$,ca,cb;function cc(cd){if(!(cd===null))if(cd!=null&&cd.$==1)b$.push(cd.$0);else if(cd!=null&&cd.$==2){cc(cd.$0);cc(cd.$1);}else if(cd!=null&&cd.$==3)cd.$0(b9);else if(cd!=null&&cd.$==4)ca.push(cd.$0);}b$=[];ca=[];cc(b_);cb=b$.slice(0);return bq.New(b9,_6.Flags(b_),cb,ca.length===0?null:{$:1,$0:function(cd){_1.iter(function(ce){ce(cd);},ca);}});};_6.Updates=function(b9){return bo.MapTreeReduce(function(b_){return b_.NChanged();},z.Const(),z.Map2Unit,b9.DynNodes);};_6.Empty=function(b9){return bq.New(b9,0,[],null);};_6.AppendTree=function(b9,b_){var b$;return b9===null?b_:b_===null?b9:(b$=new M({$:2,$0:b9,$1:b_}),(_6.SetFlags(b$,_6.Flags(b9)|_6.Flags(b_)),b$));};_6.EmptyAttr=function(){bK.$cctor();return bK.EmptyAttr;};_6.Flags=function(b9){return b9!==null&&b9.hasOwnProperty("flags")?b9.flags:0;};_6.Dynamic=function(b9,b_){return new M({$:1,$0:new bL.New(b9,b_)});};_6.HasExitAnim=function(b9){var b_;b_=2;return(b9.DynFlags&b_)===b_;};_6.GetExitAnim=function(b9){return _6.GetAnim(b9,function(b_,b$){return b_.NGetExitAnim(b$);});};_6.HasEnterAnim=function(b9){var b_;b_=1;return(b9.DynFlags&b_)===b_;};_6.GetEnterAnim=function(b9){return _6.GetAnim(b9,function(b_,b$){return b_.NGetEnterAnim(b$);});};_6.HasChangeAnim=function(b9){var b_;b_=4;return(b9.DynFlags&b_)===b_;};_6.GetChangeAnim=function(b9){return _6.GetAnim(b9,function(b_,b$){return b_.NGetChangeAnim(b$);});};_6.SetFlags=function(b9,b_){b9.flags=b_;};_6.GetAnim=function(b9,b_){return bl.Concat(n.map(function(b$){return b_(b$,b9.DynElem);},b9.DynNodes));};_6.Sync=function(b9,b_){n.iter(function(b$){b$.NSync(b9);},b_.DynNodes);};_7.ParseHTMLIntoFakeRoot=function(b9){var b_,b$,ca,cb,cc;b_=self.document.createElement("div");return!_7.rhtml().test(b9)?(b_.appendChild(self.document.createTextNode(b9)),b_):(b$=(ca=_7.rtagName().exec(b9),q.Equals(ca,null)?"":n.get(ca,1).toLowerCase()),(cb=(cc=(_7.wrapMap())[b$],cc?cc:_7.defaultWrap()),(b_.innerHTML=cb[1]+b9.replace(_7.rxhtmlTag(),"<$1></$2>")+cb[2],function(cd,ce){var cf;while(true)if(ce===0)return cd;else{cf=ce;cd=cd.lastChild;ce=cf-1;}}(b_,cb[0]))));};_7.ChildrenArray=function(b9){var b_,b$,ca;b_=[];for(b$=0,ca=b9.childNodes.length-1;b$<=ca;b$++)b_.push(b9.childNodes[b$]);return b_;};_7.rhtml=function(){bH.$cctor();return bH.rhtml;};_7.wrapMap=function(){bH.$cctor();return bH.wrapMap;};_7.defaultWrap=function(){bH.$cctor();return bH.defaultWrap;};_7.rxhtmlTag=function(){bH.$cctor();return bH.rxhtmlTag;};_7.rtagName=function(){bH.$cctor();return bH.rtagName;};_7.IterSelector=function(b9,b_,b$){var ca,cb,cc;ca=b9.querySelectorAll(b_);for(cb=0,cc=ca.length-1;cb<=cc;cb++)b$(ca[cb]);};_7.InsertAt=function(b9,b_,b$){var ca;if(!(b$.parentNode===b9&&b_===(ca=b$.nextSibling,q.Equals(ca,null)?null:ca)))b9.insertBefore(b$,b_);};_7.RemoveNode=function(b9,b_){if(b_.parentNode===b9)b9.removeChild(b_);};_8.notPresent=function(){return i.FailWith("The given key was not present in the dictionary.");};_9.Get=function(b9){return b9 instanceof b.Array?_9.ArrayEnumerator(b9):q.Equals(typeof b9,"string")?_9.StringEnumerator(b9):b9.GetEnumerator();};_9.ArrayEnumerator=function(b9){return new _.New(0,null,function(b_){var b$;b$=b_.s;return b$<n.length(b9)&&(b_.c=n.get(b9,b$),b_.s=b$+1,true);},void 0);};_9.StringEnumerator=function(b9){return new _.New(0,null,function(b_){var b$;b$=b_.s;return b$<b9.length&&(b_.c=b9[b$],b_.s=b$+1,true);},void 0);};_9.Get0=function(b9){return b9 instanceof b.Array?_9.ArrayEnumerator(b9):q.Equals(typeof b9,"string")?_9.StringEnumerator(b9):"GetEnumerator0"in b9?b9.GetEnumerator0():b9.GetEnumerator();};_=_9.T=b4.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},f,_);_.New=b4.Ctor(function(b9,b_,b$,ca){f.New.call(this);this.s=b9;this.c=b_;this.n=b$;this.d=ca;},_);$.$cctor=function(){$.$cctor=b.ignore;$.LoadedTemplates=new W.New$5();$.LocalTemplatesLoaded=false;$.GlobalHoles=new W.New$5();$.TextHoleRE="\\${([^}]+)}";$.RenderedFullDocTemplate=null;};bb.LinkElement=function(b9,b_){bb.InsertDoc(b9,b_,null);};bb.CreateTextNode=function(){return{Text:self.document.createTextNode(""),Dirty:false,Value:""};};bb.UpdateTextNode=function(b9,b_){b9.Value=b_;b9.Dirty=true;};bb.InsertDoc=function(b9,b_,b$){var ca;return b_!=null&&b_.$==1?bb.InsertNode(b9,b_.$0.El,b$):b_!=null&&b_.$==2?(ca=b_.$0,(ca.Dirty=false,bb.InsertDoc(b9,ca.Current,b$))):b_==null?b$:b_!=null&&b_.$==4?bb.InsertNode(b9,b_.$0.Text,b$):b_!=null&&b_.$==5?bb.InsertNode(b9,b_.$0,b$):b_!=null&&b_.$==6?n.foldBack(function(cb,cc){return cb==null||cb.constructor===X?bb.InsertDoc(b9,cb,cc):bb.InsertNode(b9,cb,cc);},b_.$0.Els,b$):bb.InsertDoc(b9,b_.$0,bb.InsertDoc(b9,b_.$1,b$));};bb.CreateRunState=function(b9,b_){return bz.New(bA.get_Empty(),bb.CreateElemNode(b9,_6.EmptyAttr(),b_));};bb.PerformAnimatedUpdate=function(b9,b_,b$){var ca;return bl.get_UseAnimations()?(ca=null,bB.Delay(function(){var cb,cc,cd;cb=bA.FindAll(b$);cc=bb.ComputeChangeAnim(b_,cb);cd=bb.ComputeEnterAnim(b_,cb);return bB.Bind(bl.Play(bl.Append(cc,bb.ComputeExitAnim(b_,cb))),function(){return bB.Bind(bb.SyncElemNodesNextFrame(b9,b_),function(){return bB.Bind(bl.Play(cd),function(){b_.PreviousNodes=cb;return bB.Return(null);});});});})):bb.SyncElemNodesNextFrame(b9,b_);};bb.PerformSyncUpdate=function(b9,b_,b$){var ca;ca=bA.FindAll(b$);bb.SyncElemNode(b9,b_.Top);b_.PreviousNodes=ca;};bb.CreateEmbedNode=function(){return{Current:null,Dirty:false};};bb.UpdateEmbedNode=function(b9,b_){b9.Current=b_;b9.Dirty=true;};bb.InsertBeforeDelim=function(b9,b_){var b$,ca;b$=b9.parentNode;ca=self.document.createTextNode("");b$.insertBefore(ca,b9);bb.LinkPrevElement(b9,b_);return ca;};bb.InsertNode=function(b9,b_,b$){_7.InsertAt(b9,b$,b_);return b_;};bb.CreateElemNode=function(b9,b_,b$){var ca;bb.LinkElement(b9,b$);ca=_6.Insert(b9,b_);return be.New(ca,b$,null,b9,V.Int(),b4.GetOptional(ca.OnAfterRender));};bb.SyncElemNodesNextFrame=function(b9,b_){function b$(ca){b.requestAnimationFrame(function(){bb.SyncElemNode(b9,b_.Top);ca();});}return bm.BatchUpdatesEnabled()?bB.FromContinuations(function(ca,cb,cc){return b$.apply(null,[ca,cb,cc]);}):(bb.SyncElemNode(b9,b_.Top),bB.Return(null));};bb.ComputeExitAnim=function(b9,b_){return bl.Concat(n.map(function(b$){return _6.GetExitAnim(b$.Attr);},bA.ToArray(bA.Except(b_,bA.Filter(function(b$){return _6.HasExitAnim(b$.Attr);},b9.PreviousNodes)))));};bb.ComputeEnterAnim=function(b9,b_){return bl.Concat(n.map(function(b$){return _6.GetEnterAnim(b$.Attr);},bA.ToArray(bA.Except(b9.PreviousNodes,bA.Filter(function(b$){return _6.HasEnterAnim(b$.Attr);},b_)))));};bb.ComputeChangeAnim=function(b9,b_){var b$;function ca(cb){return _6.HasChangeAnim(cb.Attr);}b$=function(cb){return bA.Filter(ca,cb);};return bl.Concat(n.map(function(cb){return _6.GetChangeAnim(cb.Attr);},bA.ToArray(bA.Intersect(b$(b9.PreviousNodes),b$(b_)))));};bb.SyncElemNode=function(b9,b_){!b9?bb.SyncElement(b_):void 0;bb.Sync(b_.Children);bb.AfterRender(b_);};bb.LinkPrevElement=function(b9,b_){bb.InsertDoc(b9.parentNode,b_,b9);};bb.SyncElement=function(b9){function b_(b$){function ca(cb){var cc,cd;return cb!=null&&cb.$==0?ca(cb.$0)||ca(cb.$1):cb!=null&&cb.$==2?(cc=cb.$0,cc.Dirty||ca(cc.Current)):cb!=null&&cb.$==6&&(cd=cb.$0,cd.Dirty||n.exists(b_,cd.Holes));}return ca(b$.Children);}_6.Sync(b9.El,b9.Attr);b_(b9)?bb.DoSyncElement(b9):void 0;};bb.Sync=function(b9){var b_,b$;if(b9!=null&&b9.$==1)bb.SyncElemNode(false,b9.$0);else if(b9!=null&&b9.$==2)bb.Sync(b9.$0.Current);else if(b9==null);else if(b9!=null&&b9.$==5);else if(b9!=null&&b9.$==4){b_=b9.$0;b_.Dirty?(b_.Text.nodeValue=b_.Value,b_.Dirty=false):void 0;}else if(b9!=null&&b9.$==6){b$=b9.$0;n.iter(function(ca){bb.SyncElemNode(false,ca);},b$.Holes);n.iter(function(ca){_6.Sync(ca[0],ca[1]);},b$.Attrs);bb.AfterRender(b$);}else{bb.Sync(b9.$0);bb.Sync(b9.$1);}};bb.AfterRender=function(b9){var b_;b_=b4.GetOptional(b9.Render);b_!=null&&b_.$==1?(b_.$0(b9.El),b4.SetOptional(b9,"Render",null)):void 0;};bb.DoSyncElement=function(b9){var b_,b$,ca;function cb(cc,cd){var ce,cf;return cc!=null&&cc.$==1?cc.$0.El:cc!=null&&cc.$==2?(ce=cc.$0,ce.Dirty?(ce.Dirty=false,bb.InsertDoc(b_,ce.Current,cd)):cb(ce.Current,cd)):cc==null?cd:cc!=null&&cc.$==4?cc.$0.Text:cc!=null&&cc.$==5?cc.$0:cc!=null&&cc.$==6?(cf=cc.$0,(cf.Dirty?cf.Dirty=false:void 0,n.foldBack(function(cg,ch){return cg==null||cg.constructor===X?cb(cg,ch):cg;},cf.Els,cd))):cb(cc.$0,cb(cc.$1,cd));}b_=b9.El;bU.Iter((b$=b9.El,function(cc){_7.RemoveNode(b$,cc);}),bU.Except(bU.DocChildren(b9),bU.Children(b9.El,b4.GetOptional(b9.Delimiters))));cb(b9.Children,(ca=b4.GetOptional(b9.Delimiters),ca!=null&&ca.$==1?ca.$0[1]:null));};bc.DatePortion=function(b9){var b_;b_=new b6(b9);return(new b6(b_.getFullYear(),b_.getMonth(),b_.getDate())).getTime();};bd.$cctor=function(){bd.$cctor=b.ignore;bd.counter=0;};be=g.DocElemNode=b4.Class({Equals:function(b9){return this.ElKey===b9.ElKey;},GetHashCode:function(){return this.ElKey;}},null,be);be.New=function(b9,b_,b$,ca,cb,cc){var cd;return new be((cd={Attr:b9,Children:b_,El:ca,ElKey:cb},(b4.SetOptional(cd,"Delimiters",b$),b4.SetOptional(cd,"Render",cc),cd)));};bg.InMemory=function(b9){return new br.New(b9);};bh=g.Elt=b4.Class({},J,bh);bh.TreeNode=function(b9,b_){var b$,ca;function cb(cc){return cc[1];}b$=bw.Create(b_);return new bh.New$1({$:6,$0:b9},z.Map2Unit((ca=n.map(function(cc){return _6.Updates(cb(cc));},b9.Attrs),bo.TreeReduce(z.Const(),z.Map2Unit,ca)),b$.v),n.get(b9.Els,0),b$);};bh.New=function(b9,b_,b$){var ca,cb;ca=bb.CreateElemNode(b9,b_,b$.docNode);cb=bw.Create(b$.updates);return new bh.New$1({$:1,$0:ca},z.Map2Unit(_6.Updates(ca.Attr),cb.v),b9,cb);};bh.New$1=b4.Ctor(function(b9,b_,b$,ca){J.New.call(this,b9,b_);this.docNode$1=b9;this.updates$1=b_;this.elt=b$;this.rvUpdates=ca;},bh);bi.convertTextNode=function(b9){var b_,b$,ca,cb,cc,cd;b_=null;b$=0;cb=b9.textContent;cc=new b.RegExp(I.TextHoleRE(),"g");while(b_=cc.exec(cb),b_!==null){b9.parentNode.insertBefore(self.document.createTextNode(bj.string(cb,{$:1,$0:b$},{$:1,$0:cc.lastIndex-n.get(b_,0).length-1})),b9);b$=cc.lastIndex;cd=self.document.createElement("span");cd.setAttribute("ws-replace",n.get(b_,1).toLowerCase());b9.parentNode.insertBefore(cd,b9);}cc.lastIndex=0;b9.textContent=bj.string(cb,{$:1,$0:b$},null);};bi.failNotLoaded=function(b9){b7.warn("Instantiating non-loaded template",b9);};bi.fillTextHole=function(b9,b_,b$){var ca;ca=b9.querySelector("[ws-replace]");return q.Equals(ca,null)?(b7.warn("Filling non-existent text hole",b$),null):(ca.parentNode.replaceChild(self.document.createTextNode(b_),ca),{$:1,$0:ca.getAttribute("ws-replace")});};bi.removeHolesExcept=function(b9,b_){function b$(ca){I.foreachNotPreserved(b9,"["+ca+"]",function(cb){if(!b_.Contains(cb.getAttribute(ca)))cb.removeAttribute(ca);});}b$("ws-attr");b$("ws-onafterrender");b$("ws-var");I.foreachNotPreserved(b9,"[ws-hole]",function(ca){if(!b_.Contains(ca.getAttribute("ws-hole"))){ca.removeAttribute("ws-hole");while(ca.hasChildNodes())ca.removeChild(ca.lastChild);}});I.foreachNotPreserved(b9,"[ws-replace]",function(ca){if(!b_.Contains(ca.getAttribute("ws-replace")))ca.parentNode.removeChild(ca);});I.foreachNotPreserved(b9,"[ws-on]",function(ca){ca.setAttribute("ws-on",bv.concat(" ",n.filter(function(cb){return b_.Contains(n.get(bv.SplitChars(cb,[":"],1),1));},bv.SplitChars(ca.getAttribute("ws-on"),[" "],1))));});I.foreachNotPreserved(b9,"[ws-attr-holes]",function(ca){var cb,cc,cd,ce,cf;cb=bv.SplitChars(ca.getAttribute("ws-attr-holes"),[" "],1);for(cc=0,cd=cb.length-1;cc<=cd;cc++){ce=n.get(cb,cc);ca.setAttribute(ce,(cf=new b.RegExp(I.TextHoleRE(),"g"),ca.getAttribute(ce).replace(cf,function(cg,ch){return b_.Contains(ch)?cg:"";})));}});};bi.fillInstanceAttrs=function(b9,b_){var b$,ca,cb,cc,cd;bi.convertAttrs(b_);b$=b_.nodeName.toLowerCase();ca=b9.querySelector("[ws-attr="+b$+"]");if(q.Equals(ca,null))b7.warn("Filling non-existent attr hole",b$);else{ca.removeAttribute("ws-attr");for(cb=0,cc=b_.attributes.length-1;cb<=cc;cb++){cd=b_.attributes.item(cb);cd.name==="class"&&ca.hasAttribute("class")?ca.setAttribute("class",ca.getAttribute("class")+" "+cd.nodeValue):ca.setAttribute(cd.name,cd.nodeValue);}}};bi.mapHoles=function(b9,b_){function b$(ca){I.foreachNotPreserved(b9,"["+ca+"]",function(cb){var cc,cd;cc=(cd=null,[b_.TryGetValue(cb.getAttribute(ca).toLowerCase(),{get:function(){return cd;},set:function(ce){cd=ce;}}),cd]);cc[0]?cb.setAttribute(ca,cc[1]):void 0;});}b$("ws-hole");b$("ws-replace");b$("ws-attr");b$("ws-onafterrender");b$("ws-var");I.foreachNotPreserved(b9,"[ws-on]",function(ca){ca.setAttribute("ws-on",bv.concat(" ",n.map(function(cb){var cc,cd,ce;cc=bv.SplitChars(cb,[":"],1);cd=(ce=null,[b_.TryGetValue(n.get(cc,1),{get:function(){return ce;},set:function(cf){ce=cf;}}),ce]);return cd[0]?n.get(cc,0)+":"+cd[1]:cb;},bv.SplitChars(ca.getAttribute("ws-on"),[" "],1))));});I.foreachNotPreserved(b9,"[ws-attr-holes]",function(ca){var cb,cc,cd;cb=bv.SplitChars(ca.getAttribute("ws-attr-holes"),[" "],1);for(cc=0,cd=cb.length-1;cc<=cd;cc++)(function(){var ce;function cf(cg,ch){var ci;ci=i.KeyValue(ch);return cg.replace(new b.RegExp("\\${"+ci[0]+"}","ig"),"${"+ci[1]+"}");}ce=n.get(cb,cc);return ca.setAttribute(ce,(((b4.Curried3(_1.fold))(cf))(ca.getAttribute(ce)))(b_));}());});};bi.fill=function(b9,b_,b$){while(true)if(b9.hasChildNodes())b$=b_.insertBefore(b9.lastChild,b$);else return null;};bi.convertAttrs=function(b9){var b$,ca,cb,cc,cd,ce,cf,cg;function b_(ch){var ci;ci=b9.getAttribute(ch);ci===null?void 0:b9.setAttribute(ch,ci.toLowerCase());}b$=b9.attributes;ca=[];cb=[];cc=[];for(cd=0,ce=b$.length-1;cd<=ce;cd++){cf=b$.item(cd);bv.StartsWith(cf.nodeName,"ws-on")&&cf.nodeName!=="ws-onafterrender"&&cf.nodeName!=="ws-on"?(ca.push(cf.nodeName),cb.push(bj.string(cf.nodeName,{$:1,$0:"ws-on".length},null)+":"+cf.nodeValue.toLowerCase())):!bv.StartsWith(cf.nodeName,"ws-")&&(new b.RegExp(I.TextHoleRE())).test(cf.nodeValue)?(cf.nodeValue=(cg=new b.RegExp(I.TextHoleRE(),"g"),cf.nodeValue.replace(cg,function(ch,ci){return"${"+ci.toLowerCase()+"}";})),cc.push(cf.nodeName)):void 0;}!(cb.length==0)?b9.setAttribute("ws-on",bv.concat(" ",cb)):void 0;!(cc.length==0)?b9.setAttribute("ws-attr-holes",bv.concat(" ",cc)):void 0;b_("ws-hole");b_("ws-replace");b_("ws-attr");b_("ws-onafterrender");b_("ws-var");n.iter(function(ch){b9.removeAttribute(ch);},ca);};bj.string=function(b9,b_,b$){return b_==null?b$!=null&&b$.$==1?b9.slice(0,b$.$0+1):"":b$==null?b9.slice(b_.$0):b9.slice(b_.$0,b$.$0+1);};_1.insufficient=function(){return i.FailWith("The input sequence has an insufficient number of elements.");};bk=E.KeyCollection=b4.Class({GetEnumerator$1:function(){return _9.Get(_1.map(function(b9){return b9.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},f,bk);bk.New=b4.Ctor(function(b9){f.New.call(this);this.d=b9;},bk);bl.get_UseAnimations=function(){return bC.UseAnimations();};bl.Play=function(b9){var b_;b_=null;return bB.Delay(function(){return bB.Bind(bl.Run(b.ignore,bC.Actions(b9)),function(){bC.Finalize(b9);return bB.Return(null);});});};bl.Append=function(b9,b_){return{$:0,$0:bJ.Append(b9.$0,b_.$0)};};bl.Run=function(b9,b_){var b$;function ca(cb){function cc(cd,ce){var cf;cf=ce-cd;b_.Compute(cf);b9();return cf<=b$?void b.requestAnimationFrame(function(cg){cc(cd,cg);}):cb();}b.requestAnimationFrame(function(cd){cc(cd,cd);});}b$=b_.Duration;return b$===0?bB.Zero():bB.FromContinuations(function(cb,cc,cd){return ca.apply(null,[cb,cc,cd]);});};bl.Concat=function(b9){return{$:0,$0:bJ.Concat(_1.map(bC.List,b9))};};bl.get_Empty=function(){return{$:0,$0:bJ.Empty()};};bm.BatchUpdatesEnabled=function(){bD.$cctor();return bD.BatchUpdatesEnabled;};bn.StartProcessor=function(b9){var b_;function b$(){var ca;ca=null;return bB.Delay(function(){return bB.Bind(b9,function(){var cb;cb=b_[0];return cb===1?(b_[0]=0,bB.Zero()):cb===2?(b_[0]=1,b$()):bB.Zero();});});}b_=[0];return function(){var ca;ca=b_[0];ca===0?(b_[0]=1,bB.Start(b$(),null)):ca===1?b_[0]=2:void 0;};};bo.ofSeqNonCopying=function(b9){var b_,b$;if(b9 instanceof b.Array)return b9;else if(b9 instanceof bu)return n.ofList(b9);else if(b9===null)return[];else{b_=[];b$=_9.Get(b9);try{while(b$.MoveNext())b_.push(b$.Current());return b_;}finally{if(typeof b$=="object"&&"Dispose"in b$)b$.Dispose();}}};bo.TreeReduce=function(b9,b_,b$){var ca;function cb(cc,cd){var ce,cf;return cd<=0?b9:cd===1&&(cc>=0&&cc<ca)?n.get(b$,cc):(cf=cd/2>>0,b_(cb(cc,cf),cb(cc+cf,cd-cf)));}ca=n.length(b$);return cb(0,ca);};bo.mapInPlace=function(b9,b_){var b$,ca;for(b$=0,ca=b_.length-1;b$<=ca;b$++)b_[b$]=b9(b_[b$]);return b_;};bo.MapTreeReduce=function(b9,b_,b$,ca){var cb;function cc(cd,ce){var cf,cg;return ce<=0?b_:ce===1&&(cd>=0&&cd<cb)?b9(n.get(ca,cd)):(cg=ce/2>>0,b$(cc(cd,cg),cc(cd+cg,ce-cg)));}cb=n.length(ca);return cc(0,cb);};bq.New=function(b9,b_,b$,ca){var cb;cb={DynElem:b9,DynFlags:b_,DynNodes:b$};b4.SetOptional(cb,"OnAfterRender",ca);return cb;};br=bg.ArrayStorage=b4.Class({SSetAt:function(b9,b_,b$){n.set(b$,b9,b_);return b$;},SAppend:function(b9,b_){b_.push(b9);return b_;},SInit:function(){return this.init;}},f,br);br.New=b4.Ctor(function(b9){f.New.call(this);this.init=b9;},br);bs.Handler=function(b9,b_){return _6.Static(function(b$){b$.addEventListener(b9,function(ca){return(b_(b$))(ca);},false);});};bs.OnAfterRender=function(b9){return new M({$:4,$0:b9});};bs.Value=function(b9){var b_;b_=(((bG.StringApply())(b9))(_6.Static))(function(b$){return bs.DynamicCustom(b$,b9.get_View());});return M.Append(b_[0],b_[1]);};bs.Checked=function(b9){var b_;b_=(((bG.BoolCheckedApply())(b9))(_6.Static))(function(b$){return bs.DynamicCustom(b$,b9.get_View());});return M.Append(b_[0],b_[1]);};bs.IntValue=function(b9){var b_;b_=(((bG.IntApplyChecked())(b9))(_6.Static))(function(b$){return bs.DynamicCustom(b$,b9.get_View());});return M.Append(b_[0],b_[1]);};bs.IntValueUnchecked=function(b9){var b_;b_=(((bG.IntApplyUnchecked())(b9))(_6.Static))(function(b$){return bs.DynamicCustom(b$,b9.get_View());});return M.Append(b_[0],b_[1]);};bs.FloatValue=function(b9){var b_;b_=(((bG.FloatApplyChecked())(b9))(_6.Static))(function(b$){return bs.DynamicCustom(b$,b9.get_View());});return M.Append(b_[0],b_[1]);};bs.FloatValueUnchecked=function(b9){var b_;b_=(((bG.FloatApplyUnchecked())(b9))(_6.Static))(function(b$){return bs.DynamicCustom(b$,b9.get_View());});return M.Append(b_[0],b_[1]);};bs.Dynamic=function(b9,b_){return _6.Dynamic(b_,function(b$){return function(ca){return b$.setAttribute(b9,ca);};});};bs.DynamicCustom=function(b9,b_){return _6.Dynamic(b_,b9);};bu=bt.T=b4.Class({GetEnumerator:function(){return new _.New(this,null,function(b9){var b_;b_=b9.s;return b_.$==0?false:(b9.c=b_.$0,b9.s=b_.$1,true);},void 0);},GetEnumerator0:function(){return _9.Get(this);}},null,bu);bu.Empty=new bu({$:0});bv.concat=function(b9,b_){return n.ofSeq(b_).join(b9);};bv.SplitChars=function(b9,b_,b$){return bv.Split(b9,new b.RegExp("["+bv.RegexEscape(b_.join(""))+"]"),b$);};bv.StartsWith=function(b9,b_){return b9.substring(0,b_.length)==b_;};bv.Split=function(b9,b_,b$){return b$===1?n.filter(function(ca){return ca!=="";},bv.SplitWith(b9,b_)):bv.SplitWith(b9,b_);};bv.RegexEscape=function(b9){return b9.replace(new b.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bv.SplitWith=function(b9,b_){return b9.split(b_);};bv.forall=function(b9,b_){return _1.forall(b9,bv.protect(b_));};bv.protect=function(b9){return b9===null?"":b9;};bw=g.Updates=b4.Class({},null,bw);bw.Create=function(b9){var b_;b_=null;b_=bw.New(b9,null,function(){var b$;b$=b_.s;return b$===null?(b$=B.Copy(b_.c()),b_.s=b$,B.WhenObsoleteRun(b$,function(){b_.s=null;}),b$):b$;});return b_;};bw.New=function(b9,b_,b$){return new bw({c:b9,s:b_,v:b$});};bx=E.ValueCollection=b4.Class({GetEnumerator$1:function(){return _9.Get(_1.map(function(b9){return b9.V;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},f,bx);bx.New=b4.Ctor(function(b9){f.New.call(this);this.d=b9;},bx);bz.New=function(b9,b_){return{PreviousNodes:b9,Top:b_};};bA.get_Empty=function(){return{$:0,$0:new _0.New$3()};};bA.FindAll=function(b9){var b_;function b$(cb){if(cb!=null&&cb.$==0){b$(cb.$0);b$(cb.$1);}else if(cb!=null&&cb.$==1)ca(cb.$0);else if(cb!=null&&cb.$==2)b$(cb.$0.Current);else if(cb!=null&&cb.$==6)n.iter(ca,cb.$0.Holes);}function ca(cb){b_.push(cb);b$(cb.Children);}b_=[];b$(b9);return{$:0,$0:new _0.New$2(b_)};};bA.Filter=function(b9,b_){return{$:0,$0:bR.Filter(b9,b_.$0)};};bA.Except=function(b9,b_){return{$:0,$0:bR.Except(b9.$0,b_.$0)};};bA.ToArray=function(b9){return bR.ToArray(b9.$0);};bA.Intersect=function(b9,b_){return{$:0,$0:bR.Intersect(b9.$0,b_.$0)};};bB.Delay=function(b9){return function(b_){try{(b9(null))(b_);}catch(b$){b_.k({$:1,$0:b$});}};};bB.Bind=function(b9,b_){return bB.checkCancel(function(b$){b9(bO.New(function(ca){var cb;if(ca.$==0){cb=ca.$0;bB.scheduler().Fork(function(){try{(b_(cb))(b$);}catch(cc){b$.k({$:1,$0:cc});}});}else bB.scheduler().Fork(function(){b$.k(ca);});},b$.ct));});};bB.Zero=function(){bP.$cctor();return bP.Zero;};bB.Start=function(b9,b_){var b$,ca;b$=(ca=(bB.defCTS())[0],b_==null?ca:b_.$0);bB.scheduler().Fork(function(){if(!b$.c)b9(bO.New(function(cb){if(cb.$==1)bB.UncaughtAsyncError(cb.$0);},b$));});};bB.Return=function(b9){return function(b_){b_.k({$:0,$0:b9});};};bB.scheduler=function(){bP.$cctor();return bP.scheduler;};bB.checkCancel=function(b9){return function(b_){if(b_.ct.c)bB.cancel(b_);else b9(b_);};};bB.defCTS=function(){bP.$cctor();return bP.defCTS;};bB.UncaughtAsyncError=function(b9){b7.log("WebSharper: Uncaught asynchronous exception",b9);};bB.FromContinuations=function(b9){return function(b_){var b$;function ca(cb){if(b$[0])i.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{b$[0]=true;bB.scheduler().Fork(cb);}}b$=[false];b9(function(cb){ca(function(){b_.k({$:0,$0:cb});});},function(cb){ca(function(){b_.k({$:1,$0:cb});});},function(cb){ca(function(){b_.k({$:2,$0:cb});});});};};bB.cancel=function(b9){b9.k({$:2,$0:new bX.New(b9.ct)});};bC.UseAnimations=function(){bI.$cctor();return bI.UseAnimations;};bC.Actions=function(b9){return bC.ConcatActions(n.choose(function(b_){return b_.$==1?{$:1,$0:b_.$0}:null;},bJ.ToArray(b9.$0)));};bC.Finalize=function(b9){n.iter(function(b_){if(b_.$==0)b_.$0();},bJ.ToArray(b9.$0));};bC.ConcatActions=function(b9){var b_,b$,ca,cb;b_=bo.ofSeqNonCopying(b9);b$=n.length(b_);return b$===0?bC.Const():b$===1?n.get(b_,0):(ca=_1.max(_1.map(function(cc){return cc.Duration;},b_)),(cb=n.map(function(cc){return bC.Prolong(ca,cc);},b_),bC.Def(ca,function(cc){n.iter(function(cd){cd.Compute(cc);},cb);})));};bC.List=function(b9){return b9.$0;};bC.Const=function(b9){return bC.Def(0,function(){return b9;});};bC.Def=function(b9,b_){return{Compute:b_,Duration:b9};};bC.Prolong=function(b9,b_){var b$,ca,cb;b$=b_.Compute;ca=b_.Duration;cb=bY.Create(function(){return b_.Compute(b_.Duration);});return{Compute:function(cc){return cc>=ca?cb.f():b$(cc);},Duration:b9};};bD.$cctor=function(){bD.$cctor=b.ignore;bD.BatchUpdatesEnabled=true;};bE.Clear=function(b9){b9.splice(0,n.length(b9));};bF.concat=function(b9){var b_,b$;b_=[];for(var ca in b9)b_.push.apply(b_,b9[ca]);return b_;};bG.StringApply=function(){bK.$cctor();return bK.StringApply;};bG.BoolCheckedApply=function(){bK.$cctor();return bK.BoolCheckedApply;};bG.IntApplyChecked=function(){bK.$cctor();return bK.IntApplyChecked;};bG.IntApplyUnchecked=function(){bK.$cctor();return bK.IntApplyUnchecked;};bG.FloatApplyChecked=function(){bK.$cctor();return bK.FloatApplyChecked;};bG.FloatApplyUnchecked=function(){bK.$cctor();return bK.FloatApplyUnchecked;};bG.ApplyValue=function(b9,b_,b$,ca,cb){return[ca(function(cc){function cd(){b$.UpdateMaybe(function(ce){var cf,cg;cf=b9(cc);return cf!=null&&cf.$==1&&(!q.Equals(cf.$0,ce)&&(cg=[cf,cf.$0],true))?cg[0]:null;});}cc.addEventListener("change",cd);cc.addEventListener("input",cd);cc.addEventListener("keypress",cd);}),cb(function(cc){return function(cd){var ce,cf;ce=b9(cc);return ce!=null&&ce.$==1&&(q.Equals(ce.$0,cd)&&(cf=ce.$0,true))?null:b_(cc,cd);};})];};bG.StringSet=function(){bK.$cctor();return bK.StringSet;};bG.StringGet=function(){bK.$cctor();return bK.StringGet;};bG.IntSetUnchecked=function(){bK.$cctor();return bK.IntSetUnchecked;};bG.IntGetUnchecked=function(){bK.$cctor();return bK.IntGetUnchecked;};bG.IntSetChecked=function(){bK.$cctor();return bK.IntSetChecked;};bG.IntGetChecked=function(){bK.$cctor();return bK.IntGetChecked;};bG.FloatSetUnchecked=function(){bK.$cctor();return bK.FloatSetUnchecked;};bG.FloatGetUnchecked=function(){bK.$cctor();return bK.FloatGetUnchecked;};bG.FloatSetChecked=function(){bK.$cctor();return bK.FloatSetChecked;};bG.FloatGetChecked=function(){bK.$cctor();return bK.FloatGetChecked;};bH.$cctor=function(){var b9;bH.$cctor=b.ignore;bH.rxhtmlTag=new b.RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>","gi");bH.rtagName=new b.RegExp("<([\\w:]+)");bH.rhtml=new b.RegExp("<|&#?\\w+;");bH.wrapMap=(b9=[1,"<table>","</table>"],{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:b9,tbody:b9,tfoot:b9,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><colgroup>","</colgoup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"]});bH.defaultWrap=[0,"",""];};bI.$cctor=function(){bI.$cctor=b.ignore;bI.CubicInOut=bN.Custom(function(b9){var b_;b_=b9*b9;return 3*b_-2*(b_*b9);});bI.UseAnimations=true;};bJ.Append=function(b9,b_){return b9.$==0?b_:b_.$==0?b9:{$:2,$0:b9,$1:b_};};bJ.ToArray=function(b9){var b_;function b$(ca){if(ca.$==1)b_.push(ca.$0);else if(ca.$==2){b$(ca.$0);b$(ca.$1);}else if(ca.$==3)n.iter(function(cb){b_.push(cb);},ca.$0);}b_=[];b$(b9);return b_.slice(0);};bJ.Concat=function(b9){var b_;b_=bo.ofSeqNonCopying(b9);return bo.TreeReduce(bJ.Empty(),bJ.Append,b_);};bJ.Empty=function(){bZ.$cctor();return bZ.Empty;};bt.head=function(b9){return b9.$==1?b9.$0:bt.listEmpty();};bt.tail=function(b9){return b9.$==1?b9.$1:bt.listEmpty();};bt.listEmpty=function(){return i.FailWith("The input list was empty.");};bK.$cctor=function(){var b9,b_,b$,ca,cb,cc,cd,ce,cf,cg;bK.$cctor=b.ignore;bK.EmptyAttr=null;bK.BoolCheckedApply=b4.Curried3(function(ch,ci,cj){return[ci(function(ck){ck.addEventListener("change",function(){return!q.Equals(ch.Get(),ck.checked)?ch.Set(ck.checked):null;});}),cj(function(ck){return function(cl){ck.checked=cl;};})];});bK.StringSet=function(ch){return function(ci){ch.value=ci;};};bK.StringGet=function(ch){return{$:1,$0:ch.value};};bK.StringApply=(b9=bG.StringGet(),(b_=bG.StringSet(),b4.Curried(bG.ApplyValue,3,[b9,function(ch,ci){return(b_(ch))(ci);}])));bK.IntSetUnchecked=function(ch){return function(ci){ch.value=b.String(ci);};};bK.IntGetUnchecked=function(ch){var ci,cj;ci=ch.value;return bS.isBlank(ci)?{$:1,$0:0}:(cj=+ci,cj!==cj>>0?null:{$:1,$0:cj});};bK.IntApplyUnchecked=(b$=bG.IntGetUnchecked(),(ca=bG.IntSetUnchecked(),b4.Curried(bG.ApplyValue,3,[b$,function(ch,ci){return(ca(ch))(ci);}])));bK.IntSetChecked=function(ch){return function(ci){var cj;cj=ci.get_Input();return ch.value!==cj?void(ch.value=cj):null;};};bK.IntGetChecked=function(ch){var ci,cj,ck;ci=ch.value;return{$:1,$0:bS.isBlank(ci)?(ch.checkValidity?ch.checkValidity():true)?new Y({$:2,$0:ci}):new Y({$:1,$0:ci}):(cj=(ck=0,[Z.TryParseInt32(ci,{get:function(){return ck;},set:function(cl){ck=cl;}}),ck]),cj[0]?new Y({$:0,$0:cj[1],$1:ci}):new Y({$:1,$0:ci}))};};bK.IntApplyChecked=(cb=bG.IntGetChecked(),(cc=bG.IntSetChecked(),b4.Curried(bG.ApplyValue,3,[cb,function(ch,ci){return(cc(ch))(ci);}])));bK.FloatSetUnchecked=function(ch){return function(ci){ch.value=b.String(ci);};};bK.FloatGetUnchecked=function(ch){var ci,cj;ci=ch.value;return bS.isBlank(ci)?{$:1,$0:0}:(cj=+ci,b.isNaN(cj)?null:{$:1,$0:cj});};bK.FloatApplyUnchecked=(cd=bG.FloatGetUnchecked(),(ce=bG.FloatSetUnchecked(),b4.Curried(bG.ApplyValue,3,[cd,function(ch,ci){return(ce(ch))(ci);}])));bK.FloatSetChecked=function(ch){return function(ci){var cj;cj=ci.get_Input();return ch.value!==cj?void(ch.value=cj):null;};};bK.FloatGetChecked=function(ch){var ci,cj;ci=ch.value;return{$:1,$0:bS.isBlank(ci)?(ch.checkValidity?ch.checkValidity():true)?new Y({$:2,$0:ci}):new Y({$:1,$0:ci}):(cj=+ci,b.isNaN(cj)?new Y({$:1,$0:ci}):new Y({$:0,$0:cj,$1:ci}))};};bK.FloatApplyChecked=(cf=bG.FloatGetChecked(),(cg=bG.FloatSetChecked(),b4.Curried(bG.ApplyValue,3,[cf,function(ch,ci){return(cg(ch))(ci);}])));};bL=g.DynamicAttrNode=b4.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(b9){return bl.get_Empty();},NGetEnterAnim:function(b9){return bl.get_Empty();},NGetChangeAnim:function(b9){return bl.get_Empty();},NSync:function(b9){if(this.dirty){(this.push(b9))(this.value);this.dirty=false;}}},f,bL);bL.New=b4.Ctor(function(b9,b_){var b$;b$=this;f.New.call(this);this.push=b_;this.value=void 0;this.dirty=false;this.updates=z.Map(function(ca){b$.value=ca;b$.dirty=true;},b9);},bL);bM=bB.Scheduler=b4.Class({Fork:function(b9){var b_;b_=this;this.robin.push(b9);this.idle?(this.idle=false,b.setTimeout(function(){b_.tick();},0)):void 0;},tick:function(){var b9,b_,b$;b_=this;b$=b6.now();b9=true;while(b9)if(this.robin.length===0){this.idle=true;b9=false;}else{(this.robin.shift())();b6.now()-b$>40?(b.setTimeout(function(){b_.tick();},0),b9=false):void 0;}}},f,bM);bM.New=b4.Ctor(function(){f.New.call(this);this.idle=true;this.robin=[];},bM);bN=g.Easing=b4.Class({},f,bN);bN.Custom=function(b9){return new bN.New(b9);};bN.New=b4.Ctor(function(b9){f.New.call(this);this.transformTime=b9;},bN);bO.New=function(b9,b_){return{k:b9,ct:b_};};bP.$cctor=function(){bP.$cctor=b.ignore;bP.noneCT=bQ.New(false,[]);bP.scheduler=new bM.New();bP.defCTS=[new bT.New()];bP.Zero=bB.Return();bP.GetCT=function(b9){b9.k({$:0,$0:b9.ct});};};bQ.New=function(b9,b_){return{c:b9,r:b_};};bR.Filter=function(b9,b_){return new _0.New$2(n.filter(b9,bR.ToArray(b_)));};bR.Except=function(b9,b_){var b$;b$=new _0.New$2(bR.ToArray(b_));b$.ExceptWith(bR.ToArray(b9));return b$;};bR.ToArray=function(b9){var b_;b_=n.create(b9.get_Count(),void 0);b9.CopyTo(b_);return b_;};bR.Intersect=function(b9,b_){var b$;b$=new _0.New$2(bR.ToArray(b9));b$.IntersectWith(bR.ToArray(b_));return b$;};bS.isBlank=function(b9){return bv.forall(bV.IsWhiteSpace,b9);};bT=e.CancellationTokenSource=b4.Class({},f,bT);bT.New=b4.Ctor(function(){f.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bT);bU.Children=function(b9,b_){var b$,ca,cb;if(b_!=null&&b_.$==1){cb=[];b$=b_.$0[0].nextSibling;while(b$!==b_.$0[1]){cb.push(b$);b$=b$.nextSibling;}return{$:0,$0:cb};}else return{$:0,$0:n.init(b9.childNodes.length,(ca=b9.childNodes,function(cc){return ca[cc];}))};};bU.Except=function(b9,b_){var b$;b$=b9.$0;return{$:0,$0:n.filter(function(ca){return n.forall(function(cb){return!(ca===cb);},b$);},b_.$0)};};bU.Iter=function(b9,b_){n.iter(b9,b_.$0);};bU.DocChildren=function(b9){var b_;function b$(ca){if(ca!=null&&ca.$==2)b$(ca.$0.Current);else if(ca!=null&&ca.$==1)b_.push(ca.$0.El);else if(ca==null);else if(ca!=null&&ca.$==5)b_.push(ca.$0);else if(ca!=null&&ca.$==4)b_.push(ca.$0.Text);else if(ca!=null&&ca.$==6)n.iter(function(cb){if(cb==null||cb.constructor===X)b$(cb);else b_.push(cb);},ca.$0.Els);else{b$(ca.$0);b$(ca.$1);}}b_=[];b$(b9.Children);return{$:0,$0:bo.ofSeqNonCopying(b_)};};bV.IsWhiteSpace=function(b9){return b9.match(new b.RegExp("\\s"))!==null;};Z.TryParse=function(b9,b_,b$,ca){var cb,cc;cb=+b9;cc=cb===cb-cb%1&&cb>=b_&&cb<=b$;cc?ca.set(cb):void 0;return cc;};bX=e.OperationCanceledException=b4.Class({},bW,bX);bX.New=b4.Ctor(function(b9){bX.New$1.call(this,"The operation was canceled.",null,b9);},bX);bX.New$1=b4.Ctor(function(b9,b_,b$){this.message=b9;this.inner=b_;X.setPrototypeOf(this,bX.prototype);this.ct=b$;},bX);bY.Create=function(b9){return b1.New(false,b9,bY.forceLazy);};bY.forceLazy=function(){var b9;b9=this.v();this.c=true;this.v=b9;this.f=bY.cachedLazy;return b9;};bY.cachedLazy=function(){return this.v;};bZ.$cctor=function(){bZ.$cctor=b.ignore;bZ.Empty={$:0};};b1.New=function(b9,b_,b$){return{c:b9,v:b_,f:b$};};b4.OnLoad(function(){d.Main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
